
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>rdflib.graph &#8212; rdflib 6.2.0-alpha documentation</title>

<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>


    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/rtd.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../../../_static/searchtools.js"></script>
    <link rel="shortcut icon" href="../../_static/RDFlib.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">rdflib 6.2.0-alpha documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">rdflib.graph</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for rdflib.graph</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">IO</span><span class="p">,</span>
    <span class="n">Any</span><span class="p">,</span>
    <span class="n">BinaryIO</span><span class="p">,</span>
    <span class="n">Iterable</span><span class="p">,</span>
    <span class="n">Optional</span><span class="p">,</span>
    <span class="n">TextIO</span><span class="p">,</span>
    <span class="n">Union</span><span class="p">,</span>
    <span class="n">Type</span><span class="p">,</span>
    <span class="n">cast</span><span class="p">,</span>
    <span class="n">overload</span><span class="p">,</span>
    <span class="n">Generator</span><span class="p">,</span>
    <span class="n">Tuple</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">warnings</span> <span class="kn">import</span> <span class="n">warn</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">rdflib.namespace</span> <span class="kn">import</span> <span class="n">Namespace</span><span class="p">,</span> <span class="n">RDF</span>
<span class="kn">from</span> <span class="nn">rdflib</span> <span class="kn">import</span> <span class="n">plugin</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">namespace</span>
<span class="kn">import</span> <span class="nn">rdflib.term</span>
<span class="kn">from</span> <span class="nn">rdflib.term</span> <span class="kn">import</span> <span class="n">BNode</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">URIRef</span><span class="p">,</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Genid</span>
<span class="kn">from</span> <span class="nn">rdflib.paths</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">rdflib.store</span> <span class="kn">import</span> <span class="n">Store</span>
<span class="kn">from</span> <span class="nn">rdflib.serializer</span> <span class="kn">import</span> <span class="n">Serializer</span>
<span class="kn">from</span> <span class="nn">rdflib.parser</span> <span class="kn">import</span> <span class="n">InputSource</span><span class="p">,</span> <span class="n">Parser</span><span class="p">,</span> <span class="n">create_input_source</span>
<span class="kn">from</span> <span class="nn">rdflib.namespace</span> <span class="kn">import</span> <span class="n">NamespaceManager</span>
<span class="kn">from</span> <span class="nn">rdflib.resource</span> <span class="kn">import</span> <span class="n">Resource</span>
<span class="kn">from</span> <span class="nn">rdflib.collection</span> <span class="kn">import</span> <span class="n">Collection</span>
<span class="kn">import</span> <span class="nn">rdflib.util</span>  <span class="c1"># avoid circular dependency</span>
<span class="kn">from</span> <span class="nn">rdflib.exceptions</span> <span class="kn">import</span> <span class="n">ParserError</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">pathlib</span>

<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlparse</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">url2pathname</span>

<span class="k">assert</span> <span class="n">Literal</span>  <span class="c1"># avoid warning</span>
<span class="k">assert</span> <span class="n">Namespace</span>  <span class="c1"># avoid warning</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># Type aliases to make unpacking what&#39;s going on a little more human friendly</span>
<span class="n">ContextNode</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="n">BNode</span><span class="p">,</span> <span class="n">URIRef</span><span class="p">]</span>
<span class="n">DatasetQuad</span> <span class="o">=</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">URIRef</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ContextNode</span><span class="p">]]</span>

<span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>

<span class="s2">RDFLib defines the following kinds of Graphs:</span>

<span class="s2">* :class:`~rdflib.graph.Graph`</span>
<span class="s2">* :class:`~rdflib.graph.QuotedGraph`</span>
<span class="s2">* :class:`~rdflib.graph.ConjunctiveGraph`</span>
<span class="s2">* :class:`~rdflib.graph.Dataset`</span>

<span class="s2">Graph</span>
<span class="s2">-----</span>

<span class="s2">An RDF graph is a set of RDF triples. Graphs support the python ``in``</span>
<span class="s2">operator, as well as iteration and some operations like union,</span>
<span class="s2">difference and intersection.</span>

<span class="s2">see :class:`~rdflib.graph.Graph`</span>

<span class="s2">Conjunctive Graph</span>
<span class="s2">-----------------</span>

<span class="s2">A Conjunctive Graph is the most relevant collection of graphs that are</span>
<span class="s2">considered to be the boundary for closed world assumptions.  This</span>
<span class="s2">boundary is equivalent to that of the store instance (which is itself</span>
<span class="s2">uniquely identified and distinct from other instances of</span>
<span class="s2">:class:`Store` that signify other Conjunctive Graphs).  It is</span>
<span class="s2">equivalent to all the named graphs within it and associated with a</span>
<span class="s2">``_default_`` graph which is automatically assigned a :class:`BNode`</span>
<span class="s2">for an identifier - if one isn&#39;t given.</span>

<span class="s2">see :class:`~rdflib.graph.ConjunctiveGraph`</span>

<span class="s2">Quoted graph</span>
<span class="s2">------------</span>

<span class="s2">The notion of an RDF graph [14] is extended to include the concept of</span>
<span class="s2">a formula node. A formula node may occur wherever any other kind of</span>
<span class="s2">node can appear. Associated with a formula node is an RDF graph that</span>
<span class="s2">is completely disjoint from all other graphs; i.e. has no nodes in</span>
<span class="s2">common with any other graph. (It may contain the same labels as other</span>
<span class="s2">RDF graphs; because this is, by definition, a separate graph,</span>
<span class="s2">considerations of tidiness do not apply between the graph at a formula</span>
<span class="s2">node and any other graph.)</span>

<span class="s2">This is intended to map the idea of &quot;{ N3-expression }&quot; that is used</span>
<span class="s2">by N3 into an RDF graph upon which RDF semantics is defined.</span>

<span class="s2">see :class:`~rdflib.graph.QuotedGraph`</span>

<span class="s2">Dataset</span>
<span class="s2">-------</span>

<span class="s2">The RDF 1.1 Dataset, a small extension to the Conjunctive Graph. The</span>
<span class="s2">primary term is &quot;graphs in the datasets&quot; and not &quot;contexts with quads&quot;</span>
<span class="s2">so there is a separate method to set/retrieve a graph in a dataset and</span>
<span class="s2">to operate with dataset graphs. As a consequence of this approach,</span>
<span class="s2">dataset graphs cannot be identified with blank nodes, a name is always</span>
<span class="s2">required (RDFLib will automatically add a name if one is not provided</span>
<span class="s2">at creation time). This implementation includes a convenience method</span>
<span class="s2">to directly add a single quad to a dataset graph.</span>

<span class="s2">see :class:`~rdflib.graph.Dataset`</span>

<span class="s2">Working with graphs</span>
<span class="s2">===================</span>

<span class="s2">Instantiating Graphs with default store (Memory) and default identifier</span>
<span class="s2">(a BNode):</span>

<span class="s2">    &gt;&gt;&gt; g = Graph()</span>
<span class="s2">    &gt;&gt;&gt; g.store.__class__</span>
<span class="s2">    &lt;class &#39;rdflib.plugins.stores.memory.Memory&#39;&gt;</span>
<span class="s2">    &gt;&gt;&gt; g.identifier.__class__</span>
<span class="s2">    &lt;class &#39;rdflib.term.BNode&#39;&gt;</span>

<span class="s2">Instantiating Graphs with a Memory store and an identifier -</span>
<span class="s2">&lt;http://rdflib.net&gt;:</span>

<span class="s2">    &gt;&gt;&gt; g = Graph(&#39;Memory&#39;, URIRef(&quot;http://rdflib.net&quot;))</span>
<span class="s2">    &gt;&gt;&gt; g.identifier</span>
<span class="s2">    rdflib.term.URIRef(&#39;http://rdflib.net&#39;)</span>
<span class="s2">    &gt;&gt;&gt; str(g)  # doctest: +NORMALIZE_WHITESPACE</span>
<span class="s2">    &quot;&lt;http://rdflib.net&gt; a rdfg:Graph;rdflib:storage</span>
<span class="s2">     [a rdflib:Store;rdfs:label &#39;Memory&#39;].&quot;</span>

<span class="s2">Creating a ConjunctiveGraph - The top level container for all named Graphs</span>
<span class="s2">in a &quot;database&quot;:</span>

<span class="s2">    &gt;&gt;&gt; g = ConjunctiveGraph()</span>
<span class="s2">    &gt;&gt;&gt; str(g.default_context)</span>
<span class="s2">    &quot;[a rdfg:Graph;rdflib:storage [a rdflib:Store;rdfs:label &#39;Memory&#39;]].&quot;</span>

<span class="s2">Adding / removing reified triples to Graph and iterating over it directly or</span>
<span class="s2">via triple pattern:</span>

<span class="s2">    &gt;&gt;&gt; g = Graph()</span>
<span class="s2">    &gt;&gt;&gt; statementId = BNode()</span>
<span class="s2">    &gt;&gt;&gt; print(len(g))</span>
<span class="s2">    0</span>
<span class="s2">    &gt;&gt;&gt; g.add((statementId, RDF.type, RDF.Statement)) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g.add((statementId, RDF.subject,</span>
<span class="s2">    ...     URIRef(&quot;http://rdflib.net/store/ConjunctiveGraph&quot;))) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g.add((statementId, RDF.predicate, namespace.RDFS.label)) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g.add((statementId, RDF.object, Literal(&quot;Conjunctive Graph&quot;))) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; print(len(g))</span>
<span class="s2">    4</span>
<span class="s2">    &gt;&gt;&gt; for s, p, o in g:</span>
<span class="s2">    ...     print(type(s))</span>
<span class="s2">    ...</span>
<span class="s2">    &lt;class &#39;rdflib.term.BNode&#39;&gt;</span>
<span class="s2">    &lt;class &#39;rdflib.term.BNode&#39;&gt;</span>
<span class="s2">    &lt;class &#39;rdflib.term.BNode&#39;&gt;</span>
<span class="s2">    &lt;class &#39;rdflib.term.BNode&#39;&gt;</span>

<span class="s2">    &gt;&gt;&gt; for s, p, o in g.triples((None, RDF.object, None)):</span>
<span class="s2">    ...     print(o)</span>
<span class="s2">    ...</span>
<span class="s2">    Conjunctive Graph</span>
<span class="s2">    &gt;&gt;&gt; g.remove((statementId, RDF.type, RDF.Statement)) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; print(len(g))</span>
<span class="s2">    3</span>

<span class="s2">``None`` terms in calls to :meth:`~rdflib.graph.Graph.triples` can be</span>
<span class="s2">thought of as &quot;open variables&quot;.</span>

<span class="s2">Graph support set-theoretic operators, you can add/subtract graphs, as</span>
<span class="s2">well as intersection (with multiplication operator g1*g2) and xor (g1</span>
<span class="s2">^ g2).</span>

<span class="s2">Note that BNode IDs are kept when doing set-theoretic operations, this</span>
<span class="s2">may or may not be what you want. Two named graphs within the same</span>
<span class="s2">application probably want share BNode IDs, two graphs with data from</span>
<span class="s2">different sources probably not.  If your BNode IDs are all generated</span>
<span class="s2">by RDFLib they are UUIDs and unique.</span>

<span class="s2">    &gt;&gt;&gt; g1 = Graph()</span>
<span class="s2">    &gt;&gt;&gt; g2 = Graph()</span>
<span class="s2">    &gt;&gt;&gt; u = URIRef(&quot;http://example.com/foo&quot;)</span>
<span class="s2">    &gt;&gt;&gt; g1.add([u, namespace.RDFS.label, Literal(&quot;foo&quot;)]) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g1.add([u, namespace.RDFS.label, Literal(&quot;bar&quot;)]) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g2.add([u, namespace.RDFS.label, Literal(&quot;foo&quot;)]) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g2.add([u, namespace.RDFS.label, Literal(&quot;bing&quot;)]) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; len(g1 + g2)  # adds bing as label</span>
<span class="s2">    3</span>
<span class="s2">    &gt;&gt;&gt; len(g1 - g2)  # removes foo</span>
<span class="s2">    1</span>
<span class="s2">    &gt;&gt;&gt; len(g1 * g2)  # only foo</span>
<span class="s2">    1</span>
<span class="s2">    &gt;&gt;&gt; g1 += g2  # now g1 contains everything</span>


<span class="s2">Graph Aggregation - ConjunctiveGraphs and ReadOnlyGraphAggregate within</span>
<span class="s2">the same store:</span>

<span class="s2">    &gt;&gt;&gt; store = plugin.get(&quot;Memory&quot;, Store)()</span>
<span class="s2">    &gt;&gt;&gt; g1 = Graph(store)</span>
<span class="s2">    &gt;&gt;&gt; g2 = Graph(store)</span>
<span class="s2">    &gt;&gt;&gt; g3 = Graph(store)</span>
<span class="s2">    &gt;&gt;&gt; stmt1 = BNode()</span>
<span class="s2">    &gt;&gt;&gt; stmt2 = BNode()</span>
<span class="s2">    &gt;&gt;&gt; stmt3 = BNode()</span>
<span class="s2">    &gt;&gt;&gt; g1.add((stmt1, RDF.type, RDF.Statement)) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g1.add((stmt1, RDF.subject,</span>
<span class="s2">    ...     URIRef(&#39;http://rdflib.net/store/ConjunctiveGraph&#39;))) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g1.add((stmt1, RDF.predicate, namespace.RDFS.label)) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g1.add((stmt1, RDF.object, Literal(&#39;Conjunctive Graph&#39;))) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g2.add((stmt2, RDF.type, RDF.Statement)) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g2.add((stmt2, RDF.subject,</span>
<span class="s2">    ...     URIRef(&#39;http://rdflib.net/store/ConjunctiveGraph&#39;))) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g2.add((stmt2, RDF.predicate, RDF.type)) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g2.add((stmt2, RDF.object, namespace.RDFS.Class)) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g3.add((stmt3, RDF.type, RDF.Statement)) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g3.add((stmt3, RDF.subject,</span>
<span class="s2">    ...     URIRef(&#39;http://rdflib.net/store/ConjunctiveGraph&#39;))) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g3.add((stmt3, RDF.predicate, namespace.RDFS.comment)) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; g3.add((stmt3, RDF.object, Literal(</span>
<span class="s2">    ...     &#39;The top-level aggregate graph - The sum &#39; +</span>
<span class="s2">    ...     &#39;of all named graphs within a Store&#39;))) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; len(list(ConjunctiveGraph(store).subjects(RDF.type, RDF.Statement)))</span>
<span class="s2">    3</span>
<span class="s2">    &gt;&gt;&gt; len(list(ReadOnlyGraphAggregate([g1,g2]).subjects(</span>
<span class="s2">    ...     RDF.type, RDF.Statement)))</span>
<span class="s2">    2</span>

<span class="s2">ConjunctiveGraphs have a :meth:`~rdflib.graph.ConjunctiveGraph.quads` method</span>
<span class="s2">which returns quads instead of triples, where the fourth item is the Graph</span>
<span class="s2">(or subclass thereof) instance in which the triple was asserted:</span>

<span class="s2">    &gt;&gt;&gt; uniqueGraphNames = set(</span>
<span class="s2">    ...     [graph.identifier for s, p, o, graph in ConjunctiveGraph(store</span>
<span class="s2">    ...     ).quads((None, RDF.predicate, None))])</span>
<span class="s2">    &gt;&gt;&gt; len(uniqueGraphNames)</span>
<span class="s2">    3</span>
<span class="s2">    &gt;&gt;&gt; unionGraph = ReadOnlyGraphAggregate([g1, g2])</span>
<span class="s2">    &gt;&gt;&gt; uniqueGraphNames = set(</span>
<span class="s2">    ...     [graph.identifier for s, p, o, graph in unionGraph.quads(</span>
<span class="s2">    ...     (None, RDF.predicate, None))])</span>
<span class="s2">    &gt;&gt;&gt; len(uniqueGraphNames)</span>
<span class="s2">    2</span>

<span class="s2">Parsing N3 from a string</span>

<span class="s2">    &gt;&gt;&gt; g2 = Graph()</span>
<span class="s2">    &gt;&gt;&gt; src = &#39;&#39;&#39;</span>
<span class="s2">    ... @prefix rdf:  &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .</span>
<span class="s2">    ... @prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .</span>
<span class="s2">    ... [ a rdf:Statement ;</span>
<span class="s2">    ...   rdf:subject &lt;http://rdflib.net/store#ConjunctiveGraph&gt;;</span>
<span class="s2">    ...   rdf:predicate rdfs:label;</span>
<span class="s2">    ...   rdf:object &quot;Conjunctive Graph&quot; ] .</span>
<span class="s2">    ... &#39;&#39;&#39;</span>
<span class="s2">    &gt;&gt;&gt; g2 = g2.parse(data=src, format=&quot;n3&quot;)</span>
<span class="s2">    &gt;&gt;&gt; print(len(g2))</span>
<span class="s2">    4</span>

<span class="s2">Using Namespace class:</span>

<span class="s2">    &gt;&gt;&gt; RDFLib = Namespace(&quot;http://rdflib.net/&quot;)</span>
<span class="s2">    &gt;&gt;&gt; RDFLib.ConjunctiveGraph</span>
<span class="s2">    rdflib.term.URIRef(&#39;http://rdflib.net/ConjunctiveGraph&#39;)</span>
<span class="s2">    &gt;&gt;&gt; RDFLib[&quot;Graph&quot;]</span>
<span class="s2">    rdflib.term.URIRef(&#39;http://rdflib.net/Graph&#39;)</span>

<span class="s2">&quot;&quot;&quot;</span>


<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Graph&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ConjunctiveGraph&quot;</span><span class="p">,</span>
    <span class="s2">&quot;QuotedGraph&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Seq&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ModificationException&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
    <span class="s2">&quot;UnSupportedAggregateOperation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ReadOnlyGraphAggregate&quot;</span><span class="p">,</span>
    <span class="s2">&quot;BatchAddGraph&quot;</span><span class="p">,</span>
<span class="p">]</span>


<div class="viewcode-block" id="Graph"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph">[docs]</a><span class="k">class</span> <span class="nc">Graph</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An RDF Graph</span>

<span class="sd">    The constructor accepts one argument, the &quot;store&quot;</span>
<span class="sd">    that will be used to store the graph data (see the &quot;store&quot;</span>
<span class="sd">    package for stores currently shipped with rdflib).</span>

<span class="sd">    Stores can be context-aware or unaware.  Unaware stores take up</span>
<span class="sd">    (some) less space but cannot support features that require</span>
<span class="sd">    context, such as true merging/demerging of sub-graphs and</span>
<span class="sd">    provenance.</span>

<span class="sd">    The Graph constructor can take an identifier which identifies the Graph</span>
<span class="sd">    by name.  If none is given, the graph is assigned a BNode for its</span>
<span class="sd">    identifier.</span>

<span class="sd">    For more on named graphs, see: http://www.w3.org/2004/03/trix/</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Graph.__init__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">store</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Store</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
        <span class="n">identifier</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">namespace_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">NamespaceManager</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">base</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span> <span class="o">=</span> <span class="n">base</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__identifier</span><span class="p">:</span> <span class="n">Node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__identifier</span> <span class="o">=</span> <span class="n">identifier</span> <span class="ow">or</span> <span class="n">BNode</span><span class="p">()</span>  <span class="c1"># type: ignore[assignment]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__identifier</span><span class="p">,</span> <span class="n">Node</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__identifier</span> <span class="o">=</span> <span class="n">URIRef</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__identifier</span><span class="p">)</span>  <span class="c1"># type: ignore[unreachable]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__store</span><span class="p">:</span> <span class="n">Store</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">store</span><span class="p">,</span> <span class="n">Store</span><span class="p">):</span>
            <span class="c1"># TODO: error handling</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__store</span> <span class="o">=</span> <span class="n">store</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">store</span><span class="p">,</span> <span class="n">Store</span><span class="p">)()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__store</span> <span class="o">=</span> <span class="n">store</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__namespace_manager</span> <span class="o">=</span> <span class="n">namespace_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_aware</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formula_aware</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_union</span> <span class="o">=</span> <span class="kc">False</span></div>

    <span class="k">def</span> <span class="nf">__get_store</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__store</span>

    <span class="n">store</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">__get_store</span><span class="p">)</span>  <span class="c1"># read-only attr</span>

    <span class="k">def</span> <span class="nf">__get_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__identifier</span>

    <span class="n">identifier</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">__get_identifier</span><span class="p">)</span>  <span class="c1"># read-only attr</span>

    <span class="k">def</span> <span class="nf">_get_namespace_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__namespace_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__namespace_manager</span> <span class="o">=</span> <span class="n">NamespaceManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__namespace_manager</span>

    <span class="k">def</span> <span class="nf">_set_namespace_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nm</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__namespace_manager</span> <span class="o">=</span> <span class="n">nm</span>

    <span class="n">namespace_manager</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">_get_namespace_manager</span><span class="p">,</span>
        <span class="n">_set_namespace_manager</span><span class="p">,</span>
        <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;this graph&#39;s namespace-manager&quot;</span><span class="p">,</span>
    <span class="p">)</span>

<div class="viewcode-block" id="Graph.__repr__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;Graph identifier=</span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="Graph.__str__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">URIRef</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> a rdfg:Graph;rdflib:storage &quot;</span> <span class="o">+</span> <span class="s2">&quot;[a rdflib:Store;rdfs:label &#39;</span><span class="si">%s</span><span class="s2">&#39;].&quot;</span>
            <span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="o">.</span><span class="n">n3</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="s2">&quot;[a rdfg:Graph;rdflib:storage &quot;</span> <span class="o">+</span> <span class="s2">&quot;[a rdflib:Store;rdfs:label &#39;</span><span class="si">%s</span><span class="s2">&#39;]].&quot;</span>
            <span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span></div>

<div class="viewcode-block" id="Graph.toPython"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.toPython">[docs]</a>    <span class="k">def</span> <span class="nf">toPython</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Graph.destroy"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.destroy">[docs]</a>    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Destroy the store identified by `configuration` if supported&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__store</span><span class="o">.</span><span class="n">destroy</span><span class="p">(</span><span class="n">configuration</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="c1"># Transactional interfaces (optional)</span>
<div class="viewcode-block" id="Graph.commit"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.commit">[docs]</a>    <span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Commits active transactions&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__store</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Graph.rollback"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.rollback">[docs]</a>    <span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rollback active transactions&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__store</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Graph.open"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.open">[docs]</a>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">create</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open the graph store</span>

<span class="sd">        Might be necessary for stores that require opening a connection to a</span>
<span class="sd">        database or acquiring some resource.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__store</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">configuration</span><span class="p">,</span> <span class="n">create</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.close"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">commit_pending_transaction</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Close the graph store</span>

<span class="sd">        Might be necessary for stores that require closing a connection to a</span>
<span class="sd">        database or releasing some resource.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__store</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">commit_pending_transaction</span><span class="o">=</span><span class="n">commit_pending_transaction</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.add"><a class="viewcode-back" href="../../intro_to_creating_rdf.html#rdflib.graph.Graph.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Add a triple with self as context&quot;&quot;&quot;</span>
        <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="o">=</span> <span class="n">triple</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Node</span><span class="p">),</span> <span class="s2">&quot;Subject </span><span class="si">%s</span><span class="s2"> must be an rdflib term&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">s</span><span class="p">,)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Node</span><span class="p">),</span> <span class="s2">&quot;Predicate </span><span class="si">%s</span><span class="s2"> must be an rdflib term&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p</span><span class="p">,)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Node</span><span class="p">),</span> <span class="s2">&quot;Object </span><span class="si">%s</span><span class="s2"> must be an rdflib term&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">o</span><span class="p">,)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__store</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="bp">self</span><span class="p">,</span> <span class="n">quoted</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Graph.addN"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.addN">[docs]</a>    <span class="k">def</span> <span class="nf">addN</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quads</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]):</span>
        <span class="sd">&quot;&quot;&quot;Add a sequence of triple with context&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__store</span><span class="o">.</span><span class="n">addN</span><span class="p">(</span>
            <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">quads</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Graph</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">identifier</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span>
            <span class="ow">and</span> <span class="n">_assertnode</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Graph.remove"><a class="viewcode-back" href="../../intro_to_creating_rdf.html#rdflib.graph.Graph.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a triple from the graph</span>

<span class="sd">        If the triple does not provide a context attribute, removes the triple</span>
<span class="sd">        from all contexts.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">triple</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Graph.triples"><a class="viewcode-back" href="../../intro_to_graphs.html#rdflib.graph.Graph.triples">[docs]</a>    <span class="k">def</span> <span class="nf">triples</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">Node</span><span class="p">],</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Node</span><span class="p">]]</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generator over the triple store</span>

<span class="sd">        Returns triples that match the given triple pattern. If triple pattern</span>
<span class="sd">        does not provide a context, all contexts will be searched.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="o">=</span> <span class="n">triple</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">_s</span><span class="p">,</span> <span class="n">_o</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">_s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">_o</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">cg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__store</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span></div>

<div class="viewcode-block" id="Graph.__getitem__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__getitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A graph can be &quot;sliced&quot; as a shortcut for the triples method</span>
<span class="sd">        The python slice syntax is (ab)used for specifying triples.</span>
<span class="sd">        A generator over matches is returned,</span>
<span class="sd">        the returned tuples include only the parts not given</span>

<span class="sd">        &gt;&gt;&gt; import rdflib</span>
<span class="sd">        &gt;&gt;&gt; g = rdflib.Graph()</span>
<span class="sd">        &gt;&gt;&gt; g.add((rdflib.URIRef(&quot;urn:bob&quot;), namespace.RDFS.label, rdflib.Literal(&quot;Bob&quot;))) # doctest: +ELLIPSIS</span>
<span class="sd">        &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>

<span class="sd">        &gt;&gt;&gt; list(g[rdflib.URIRef(&quot;urn:bob&quot;)]) # all triples about bob</span>
<span class="sd">        [(rdflib.term.URIRef(&#39;http://www.w3.org/2000/01/rdf-schema#label&#39;), rdflib.term.Literal(&#39;Bob&#39;))]</span>

<span class="sd">        &gt;&gt;&gt; list(g[:namespace.RDFS.label]) # all label triples</span>
<span class="sd">        [(rdflib.term.URIRef(&#39;urn:bob&#39;), rdflib.term.Literal(&#39;Bob&#39;))]</span>

<span class="sd">        &gt;&gt;&gt; list(g[::rdflib.Literal(&quot;Bob&quot;)]) # all triples with bob as object</span>
<span class="sd">        [(rdflib.term.URIRef(&#39;urn:bob&#39;), rdflib.term.URIRef(&#39;http://www.w3.org/2000/01/rdf-schema#label&#39;))]</span>

<span class="sd">        Combined with SPARQL paths, more complex queries can be</span>
<span class="sd">        written concisely:</span>

<span class="sd">        Name of all Bobs friends:</span>

<span class="sd">        g[bob : FOAF.knows/FOAF.name ]</span>

<span class="sd">        Some label for Bob:</span>

<span class="sd">        g[bob : DC.title|FOAF.name|RDFS.label]</span>

<span class="sd">        All friends and friends of friends of Bob</span>

<span class="sd">        g[bob : FOAF.knows * &quot;+&quot;]</span>

<span class="sd">        etc.</span>

<span class="sd">        .. versionadded:: 4.0</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>

            <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">step</span>
            <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">p</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">o</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">p</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_predicates</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">o</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_objects</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">o</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">predicate_objects</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">subjects</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">predicates</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">o</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># all given</span>
                <span class="k">return</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="n">Path</span><span class="p">,</span> <span class="n">Node</span><span class="p">)):</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">predicate_objects</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;You can only index a graph by a single rdflib term or path, or a slice of rdflib terms.&quot;</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="Graph.__len__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of triples in the graph</span>

<span class="sd">        If context is specified then the number of triples in the context is</span>
<span class="sd">        returned instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__store</span><span class="o">.</span><span class="fm">__len__</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.__iter__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Iterates over all triples in the store&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span></div>

<div class="viewcode-block" id="Graph.__contains__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Support for &#39;triple in graph&#39; syntax&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">triple</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">triple</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Graph.__hash__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__hash__">[docs]</a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.__cmp__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__cmp__">[docs]</a>    <span class="k">def</span> <span class="nf">__cmp__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Graph</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">identifier</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Note if None is considered equivalent to owl:Nothing</span>
            <span class="c1"># Then perhaps a graph with length 0 should be considered</span>
            <span class="c1"># equivalent to None (if compared to it)?</span>
            <span class="k">return</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="Graph.__eq__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__eq__">[docs]</a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Graph</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">identifier</span></div>

<div class="viewcode-block" id="Graph.__lt__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__lt__">[docs]</a>    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">other</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Graph</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">identifier</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Graph.__le__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__le__">[docs]</a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&lt;</span> <span class="n">other</span> <span class="ow">or</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span></div>

<div class="viewcode-block" id="Graph.__gt__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__gt__">[docs]</a>    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Graph</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
            <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Graph.__ge__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__ge__">[docs]</a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&gt;</span> <span class="n">other</span> <span class="ow">or</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span></div>

<div class="viewcode-block" id="Graph.__iadd__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__iadd__">[docs]</a>    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add all triples in Graph other to Graph.</span>
<span class="sd">        BNode IDs are not changed.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addN</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Graph.__isub__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__isub__">[docs]</a>    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Subtract all triples in Graph other from Graph.</span>
<span class="sd">        BNode IDs are not changed.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">triple</span> <span class="ow">in</span> <span class="n">other</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">triple</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Graph.__add__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set-theoretic union</span>
<span class="sd">        BNode IDs are not changed.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">retval</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)()</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">retval</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">())</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">namespaces</span><span class="p">())):</span>
            <span class="n">retval</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">retval</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">other</span><span class="p">:</span>
            <span class="n">retval</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">retval</span></div>

<div class="viewcode-block" id="Graph.__mul__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__mul__">[docs]</a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set-theoretic intersection.</span>
<span class="sd">        BNode IDs are not changed.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">retval</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)()</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">retval</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">other</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">retval</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">retval</span></div>

<div class="viewcode-block" id="Graph.__sub__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__sub__">[docs]</a>    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set-theoretic difference.</span>
<span class="sd">        BNode IDs are not changed.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">retval</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)()</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">retval</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="p">:</span>
                <span class="n">retval</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">retval</span></div>

<div class="viewcode-block" id="Graph.__xor__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__xor__">[docs]</a>    <span class="k">def</span> <span class="fm">__xor__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set-theoretic XOR.</span>
<span class="sd">        BNode IDs are not changed.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">other</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">other</span> <span class="o">-</span> <span class="bp">self</span><span class="p">)</span></div>

    <span class="fm">__or__</span> <span class="o">=</span> <span class="fm">__add__</span>
    <span class="fm">__and__</span> <span class="o">=</span> <span class="fm">__mul__</span>

    <span class="c1"># Conv. methods</span>

<div class="viewcode-block" id="Graph.set"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convenience method to update the value of object</span>

<span class="sd">        Remove any existing triples for subject and predicate before adding</span>
<span class="sd">        (subject, predicate, object).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">object_</span><span class="p">)</span> <span class="o">=</span> <span class="n">triple</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="n">subject</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">),</span> <span class="s2">&quot;s can&#39;t be None in .set([s,p,o]), as it would remove (*, p, *)&quot;</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="n">predicate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">),</span> <span class="s2">&quot;p can&#39;t be None in .set([s,p,o]), as it would remove (s, *, *)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">object_</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Graph.subjects"><a class="viewcode-back" href="../../intro_to_graphs.html#rdflib.graph.Graph.subjects">[docs]</a>    <span class="k">def</span> <span class="nf">subjects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;A generator of (optionally unique) subjects with the given</span>
<span class="sd">        predicate and object&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">unique</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">)):</span>
                <span class="k">yield</span> <span class="n">s</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">subs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">s</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">subs</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">s</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">subs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">MemoryError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Consider not setting parameter &#39;unique&#39; to True&quot;</span>
                        <span class="p">)</span>
                        <span class="k">raise</span></div>

<div class="viewcode-block" id="Graph.predicates"><a class="viewcode-back" href="../../intro_to_graphs.html#rdflib.graph.Graph.predicates">[docs]</a>    <span class="k">def</span> <span class="nf">predicates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;A generator of (optionally unique) predicates with the given</span>
<span class="sd">        subject and object&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">unique</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="p">)):</span>
                <span class="k">yield</span> <span class="n">p</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">preds</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">preds</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">p</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">preds</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">MemoryError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Consider not setting parameter &#39;unique&#39; to True&quot;</span>
                        <span class="p">)</span>
                        <span class="k">raise</span></div>

<div class="viewcode-block" id="Graph.objects"><a class="viewcode-back" href="../../intro_to_graphs.html#rdflib.graph.Graph.objects">[docs]</a>    <span class="k">def</span> <span class="nf">objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;A generator of (optionally unique) objects with the given</span>
<span class="sd">        subject and predicate&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">unique</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
                <span class="k">yield</span> <span class="n">o</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">objs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">o</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">objs</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">o</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">objs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">MemoryError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Consider not setting parameter &#39;unique&#39; to True&quot;</span>
                        <span class="p">)</span>
                        <span class="k">raise</span></div>

<div class="viewcode-block" id="Graph.subject_predicates"><a class="viewcode-back" href="../../intro_to_graphs.html#rdflib.graph.Graph.subject_predicates">[docs]</a>    <span class="k">def</span> <span class="nf">subject_predicates</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;A generator of (optionally unique) (subject, predicate) tuples</span>
<span class="sd">        for the given object&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">unique</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="p">)):</span>
                <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">subj_preds</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="p">)):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">subj_preds</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">subj_preds</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>
                    <span class="k">except</span> <span class="ne">MemoryError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Consider not setting parameter &#39;unique&#39; to True&quot;</span>
                        <span class="p">)</span>
                        <span class="k">raise</span></div>

<div class="viewcode-block" id="Graph.subject_objects"><a class="viewcode-back" href="../../intro_to_graphs.html#rdflib.graph.Graph.subject_objects">[docs]</a>    <span class="k">def</span> <span class="nf">subject_objects</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;A generator of (optionally unique) (subject, object) tuples</span>
<span class="sd">        for the given predicate&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">unique</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
                <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">o</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">subj_objs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">subj_objs</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">o</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">subj_objs</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">o</span><span class="p">))</span>
                    <span class="k">except</span> <span class="ne">MemoryError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Consider not setting parameter &#39;unique&#39; to True&quot;</span>
                        <span class="p">)</span>
                        <span class="k">raise</span></div>

<div class="viewcode-block" id="Graph.predicate_objects"><a class="viewcode-back" href="../../intro_to_graphs.html#rdflib.graph.Graph.predicate_objects">[docs]</a>    <span class="k">def</span> <span class="nf">predicate_objects</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;A generator of (optionally unique) (predicate, object) tuples</span>
<span class="sd">        for the given subject&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">unique</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
                <span class="k">yield</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pred_objs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pred_objs</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">pred_objs</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">))</span>
                    <span class="k">except</span> <span class="ne">MemoryError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Consider not setting parameter &#39;unique&#39; to True&quot;</span>
                        <span class="p">)</span>
                        <span class="k">raise</span></div>

<div class="viewcode-block" id="Graph.triples_choices"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.triples_choices">[docs]</a>    <span class="k">def</span> <span class="nf">triples_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">object_</span> <span class="o">=</span> <span class="n">triple</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">cg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">triples_choices</span><span class="p">(</span>
            <span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">object_</span><span class="p">),</span> <span class="n">context</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">):</span>
            <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span></div>

<div class="viewcode-block" id="Graph.value"><a class="viewcode-back" href="../../intro_to_graphs.html#rdflib.graph.Graph.value">[docs]</a>    <span class="k">def</span> <span class="nf">value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">RDF</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">any</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a value for a pair of two criteria</span>

<span class="sd">        Exactly one of subject, predicate, object must be None. Useful if one</span>
<span class="sd">        knows that there may only be one value.</span>

<span class="sd">        It is one of those situations that occur a lot, hence this</span>
<span class="sd">        &#39;macro&#39; like utility</span>

<span class="sd">        Parameters:</span>
<span class="sd">        subject, predicate, object  -- exactly one must be None</span>
<span class="sd">        default -- value to be returned if no values found</span>
<span class="sd">        any -- if True, return any value in the case there is more than one,</span>
<span class="sd">        else, raise UniquenessError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="n">default</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">subject</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">predicate</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">predicate</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">subject</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subjects</span><span class="p">(</span><span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">predicate</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">predicates</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">retval</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="n">retval</span> <span class="o">=</span> <span class="n">default</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="nb">next</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s2">&quot;While trying to find a value for (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">) the&quot;</span>
                        <span class="s2">&quot; following multiple values where found:</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="o">%</span> <span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="n">triples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="k">for</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">contexts</span> <span class="ow">in</span> <span class="n">triples</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)</span><span class="se">\n</span><span class="s2"> (contexts: </span><span class="si">%s</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">s</span><span class="p">,</span>
                            <span class="n">p</span><span class="p">,</span>
                            <span class="n">o</span><span class="p">,</span>
                            <span class="nb">list</span><span class="p">(</span><span class="n">contexts</span><span class="p">),</span>
                        <span class="p">)</span>
                    <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">UniquenessError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                    <span class="k">pass</span>
        <span class="k">return</span> <span class="n">retval</span></div>

<div class="viewcode-block" id="Graph.items"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.items">[docs]</a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generator over all items in the resource specified by list</span>

<span class="sd">        list is an RDF collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">chain</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="nb">list</span><span class="p">])</span>
        <span class="k">while</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">first</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">item</span>
            <span class="nb">list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">rest</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">list</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;List contains a recursive rdf:rest reference&quot;</span><span class="p">)</span>
            <span class="n">chain</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.transitiveClosure"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.transitiveClosure">[docs]</a>    <span class="k">def</span> <span class="nf">transitiveClosure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">seen</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates transitive closure of a user-defined</span>
<span class="sd">        function against the graph</span>

<span class="sd">        &gt;&gt;&gt; from rdflib.collection import Collection</span>
<span class="sd">        &gt;&gt;&gt; g=Graph()</span>
<span class="sd">        &gt;&gt;&gt; a=BNode(&quot;foo&quot;)</span>
<span class="sd">        &gt;&gt;&gt; b=BNode(&quot;bar&quot;)</span>
<span class="sd">        &gt;&gt;&gt; c=BNode(&quot;baz&quot;)</span>
<span class="sd">        &gt;&gt;&gt; g.add((a,RDF.first,RDF.type)) # doctest: +ELLIPSIS</span>
<span class="sd">        &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="sd">        &gt;&gt;&gt; g.add((a,RDF.rest,b)) # doctest: +ELLIPSIS</span>
<span class="sd">        &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="sd">        &gt;&gt;&gt; g.add((b,RDF.first,namespace.RDFS.label)) # doctest: +ELLIPSIS</span>
<span class="sd">        &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="sd">        &gt;&gt;&gt; g.add((b,RDF.rest,c)) # doctest: +ELLIPSIS</span>
<span class="sd">        &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="sd">        &gt;&gt;&gt; g.add((c,RDF.first,namespace.RDFS.comment)) # doctest: +ELLIPSIS</span>
<span class="sd">        &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="sd">        &gt;&gt;&gt; g.add((c,RDF.rest,RDF.nil)) # doctest: +ELLIPSIS</span>
<span class="sd">        &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="sd">        &gt;&gt;&gt; def topList(node,g):</span>
<span class="sd">        ...    for s in g.subjects(RDF.rest, node):</span>
<span class="sd">        ...       yield s</span>
<span class="sd">        &gt;&gt;&gt; def reverseList(node,g):</span>
<span class="sd">        ...    for f in g.objects(node, RDF.first):</span>
<span class="sd">        ...       print(f)</span>
<span class="sd">        ...    for s in g.subjects(RDF.rest, node):</span>
<span class="sd">        ...       yield s</span>

<span class="sd">        &gt;&gt;&gt; [rt for rt in g.transitiveClosure(</span>
<span class="sd">        ...     topList,RDF.nil)] # doctest: +NORMALIZE_WHITESPACE</span>
<span class="sd">        [rdflib.term.BNode(&#39;baz&#39;),</span>
<span class="sd">         rdflib.term.BNode(&#39;bar&#39;),</span>
<span class="sd">         rdflib.term.BNode(&#39;foo&#39;)]</span>

<span class="sd">        &gt;&gt;&gt; [rt for rt in g.transitiveClosure(</span>
<span class="sd">        ...     reverseList,RDF.nil)] # doctest: +NORMALIZE_WHITESPACE</span>
<span class="sd">        http://www.w3.org/2000/01/rdf-schema#comment</span>
<span class="sd">        http://www.w3.org/2000/01/rdf-schema#label</span>
<span class="sd">        http://www.w3.org/1999/02/22-rdf-syntax-ns#type</span>
<span class="sd">        [rdflib.term.BNode(&#39;baz&#39;),</span>
<span class="sd">         rdflib.term.BNode(&#39;bar&#39;),</span>
<span class="sd">         rdflib.term.BNode(&#39;foo&#39;)]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">seen</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">seen</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">elif</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">seen</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">rt</span> <span class="ow">in</span> <span class="n">func</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="bp">self</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">rt</span>
            <span class="k">for</span> <span class="n">rt_2</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transitiveClosure</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">rt</span><span class="p">,</span> <span class="n">seen</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">rt_2</span></div>

<div class="viewcode-block" id="Graph.transitive_objects"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.transitive_objects">[docs]</a>    <span class="k">def</span> <span class="nf">transitive_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">remember</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Transitively generate objects for the ``predicate`` relationship</span>

<span class="sd">        Generated objects belong to the depth first transitive closure of the</span>
<span class="sd">        ``predicate`` relationship starting at ``subject``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">remember</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">remember</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">subject</span> <span class="ow">in</span> <span class="n">remember</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">remember</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">yield</span> <span class="n">subject</span>
        <span class="k">for</span> <span class="nb">object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transitive_objects</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">remember</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">o</span></div>

<div class="viewcode-block" id="Graph.transitive_subjects"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.transitive_subjects">[docs]</a>    <span class="k">def</span> <span class="nf">transitive_subjects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">remember</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Transitively generate subjects for the ``predicate`` relationship</span>

<span class="sd">        Generated subjects belong to the depth first transitive closure of the</span>
<span class="sd">        ``predicate`` relationship starting at ``object``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">remember</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">remember</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="nb">object</span> <span class="ow">in</span> <span class="n">remember</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">remember</span><span class="p">[</span><span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">yield</span> <span class="nb">object</span>
        <span class="k">for</span> <span class="n">subject</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subjects</span><span class="p">(</span><span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transitive_subjects</span><span class="p">(</span><span class="n">predicate</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">remember</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">s</span></div>

<div class="viewcode-block" id="Graph.qname"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.qname">[docs]</a>    <span class="k">def</span> <span class="nf">qname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace_manager</span><span class="o">.</span><span class="n">qname</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.compute_qname"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.compute_qname">[docs]</a>    <span class="k">def</span> <span class="nf">compute_qname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">generate</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace_manager</span><span class="o">.</span><span class="n">compute_qname</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">generate</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.bind"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.bind">[docs]</a>    <span class="k">def</span> <span class="nf">bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">override</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Bind prefix to namespace</span>

<span class="sd">        If override is True will bind namespace to given prefix even</span>
<span class="sd">        if namespace was already bound to a different prefix.</span>

<span class="sd">        if replace, replace any existing prefix with the new namespace</span>

<span class="sd">        for example:  graph.bind(&quot;foaf&quot;, &quot;http://xmlns.com/foaf/0.1/&quot;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace_manager</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
            <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">override</span><span class="o">=</span><span class="n">override</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="n">replace</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Graph.namespaces"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.namespaces">[docs]</a>    <span class="k">def</span> <span class="nf">namespaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generator over all the prefix, namespace tuples&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace_manager</span><span class="o">.</span><span class="n">namespaces</span><span class="p">():</span>
            <span class="k">yield</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span></div>

<div class="viewcode-block" id="Graph.absolutize"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.absolutize">[docs]</a>    <span class="k">def</span> <span class="nf">absolutize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">defrag</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Turn uri into an absolute URI if it&#39;s not one already&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace_manager</span><span class="o">.</span><span class="n">absolutize</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">defrag</span><span class="p">)</span></div>

    <span class="c1"># no destination and non-None positional encoding</span>
    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">base</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">encoding</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="c1"># no destination and non-None keyword encoding</span>
    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">destination</span><span class="p">:</span> <span class="kc">None</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">base</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">encoding</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">**</span><span class="n">args</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="c1"># no destination and None encoding</span>
    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">destination</span><span class="p">:</span> <span class="kc">None</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">base</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">encoding</span><span class="p">:</span> <span class="kc">None</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="o">**</span><span class="n">args</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="c1"># non-None destination</span>
    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">destination</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">PurePath</span><span class="p">,</span> <span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]],</span>
        <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">base</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">encoding</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="o">**</span><span class="n">args</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Graph&quot;</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="c1"># fallback</span>
    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">destination</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">PurePath</span><span class="p">,</span> <span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]]]</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">base</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">encoding</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="o">**</span><span class="n">args</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Graph&quot;</span><span class="p">]:</span>
        <span class="o">...</span>

<div class="viewcode-block" id="Graph.serialize"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">destination</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">PurePath</span><span class="p">,</span> <span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;turtle&quot;</span><span class="p">,</span>
        <span class="n">base</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">encoding</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Graph&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Serialize the Graph to destination</span>

<span class="sd">        If destination is None serialize method returns the serialization as</span>
<span class="sd">        bytes or string.</span>

<span class="sd">        If encoding is None and destination is None, returns a string</span>
<span class="sd">        If encoding is set, and Destination is None, returns bytes</span>

<span class="sd">        Format defaults to turtle.</span>

<span class="sd">        Format support can be extended with plugins,</span>
<span class="sd">        but &quot;xml&quot;, &quot;n3&quot;, &quot;turtle&quot;, &quot;nt&quot;, &quot;pretty-xml&quot;, &quot;trix&quot;, &quot;trig&quot; and &quot;nquads&quot; are built in.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># if base is not given as attribute use the base set for the graph</span>
        <span class="k">if</span> <span class="n">base</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span>

        <span class="n">serializer</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="n">Serializer</span><span class="p">)(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">stream</span><span class="p">:</span> <span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">destination</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">destination</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">):</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="n">destination</span><span class="p">)</span>
            <span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">destination</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">PurePath</span><span class="p">):</span>
                <span class="n">location</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">location</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">destination</span><span class="p">)</span>
            <span class="n">scheme</span><span class="p">,</span> <span class="n">netloc</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">_query</span><span class="p">,</span> <span class="n">fragment</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">netloc</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;destination </span><span class="si">{</span><span class="n">destination</span><span class="si">}</span><span class="s2"> is not a local file reference&quot;</span>
                <span class="p">)</span>
            <span class="n">fd</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkstemp</span><span class="p">()</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">fdopen</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
            <span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">dest</span> <span class="o">=</span> <span class="n">url2pathname</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">if</span> <span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span> <span class="k">else</span> <span class="n">location</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">shutil</span><span class="p">,</span> <span class="s2">&quot;move&quot;</span><span class="p">):</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Graph.print"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.print">[docs]</a>    <span class="k">def</span> <span class="nf">print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;turtle&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">),</span>
            <span class="n">file</span><span class="o">=</span><span class="n">out</span><span class="p">,</span>
            <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Graph.parse"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="n">TextIO</span><span class="p">,</span> <span class="n">InputSource</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">PurePath</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">publicID</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">BinaryIO</span><span class="p">,</span> <span class="n">TextIO</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">args</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse an RDF source adding the resulting triples to the Graph.</span>

<span class="sd">        The source is specified using one of source, location, file or</span>
<span class="sd">        data.</span>

<span class="sd">        :Parameters:</span>

<span class="sd">          - `source`: An InputSource, file-like object, or string. In the case</span>
<span class="sd">            of a string the string is the location of the source.</span>
<span class="sd">          - `location`: A string indicating the relative or absolute URL of the</span>
<span class="sd">            source. Graph&#39;s absolutize method is used if a relative location</span>
<span class="sd">            is specified.</span>
<span class="sd">          - `file`: A file-like object.</span>
<span class="sd">          - `data`: A string containing the data to be parsed.</span>
<span class="sd">          - `format`: Used if format can not be determined from source, e.g. file</span>
<span class="sd">            extension or Media Type. Defaults to text/turtle. Format support can</span>
<span class="sd">            be extended with plugins, but &quot;xml&quot;, &quot;n3&quot; (use for turtle), &quot;nt&quot; &amp;</span>
<span class="sd">            &quot;trix&quot; are built in.</span>
<span class="sd">          - `publicID`: the logical URI to use as the document base. If None</span>
<span class="sd">            specified the document location is used (at least in the case where</span>
<span class="sd">            there is a document location).</span>

<span class="sd">        :Returns:</span>

<span class="sd">          - self, the graph instance.</span>

<span class="sd">        Examples:</span>

<span class="sd">        &gt;&gt;&gt; my_data = &#39;&#39;&#39;</span>
<span class="sd">        ... &lt;rdf:RDF</span>
<span class="sd">        ...   xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span>
<span class="sd">        ...   xmlns:rdfs=&quot;http://www.w3.org/2000/01/rdf-schema#&quot;</span>
<span class="sd">        ... &gt;</span>
<span class="sd">        ...   &lt;rdf:Description&gt;</span>
<span class="sd">        ...     &lt;rdfs:label&gt;Example&lt;/rdfs:label&gt;</span>
<span class="sd">        ...     &lt;rdfs:comment&gt;This is really just an example.&lt;/rdfs:comment&gt;</span>
<span class="sd">        ...   &lt;/rdf:Description&gt;</span>
<span class="sd">        ... &lt;/rdf:RDF&gt;</span>
<span class="sd">        ... &#39;&#39;&#39;</span>
<span class="sd">        &gt;&gt;&gt; import tempfile</span>
<span class="sd">        &gt;&gt;&gt; fd, file_name = tempfile.mkstemp()</span>
<span class="sd">        &gt;&gt;&gt; f = os.fdopen(fd, &quot;w&quot;)</span>
<span class="sd">        &gt;&gt;&gt; dummy = f.write(my_data)  # Returns num bytes written</span>
<span class="sd">        &gt;&gt;&gt; f.close()</span>

<span class="sd">        &gt;&gt;&gt; g = Graph()</span>
<span class="sd">        &gt;&gt;&gt; result = g.parse(data=my_data, format=&quot;application/rdf+xml&quot;)</span>
<span class="sd">        &gt;&gt;&gt; len(g)</span>
<span class="sd">        2</span>

<span class="sd">        &gt;&gt;&gt; g = Graph()</span>
<span class="sd">        &gt;&gt;&gt; result = g.parse(location=file_name, format=&quot;application/rdf+xml&quot;)</span>
<span class="sd">        &gt;&gt;&gt; len(g)</span>
<span class="sd">        2</span>

<span class="sd">        &gt;&gt;&gt; g = Graph()</span>
<span class="sd">        &gt;&gt;&gt; with open(file_name, &quot;r&quot;) as f:</span>
<span class="sd">        ...     result = g.parse(f, format=&quot;application/rdf+xml&quot;)</span>
<span class="sd">        &gt;&gt;&gt; len(g)</span>
<span class="sd">        2</span>

<span class="sd">        &gt;&gt;&gt; os.remove(file_name)</span>

<span class="sd">        &gt;&gt;&gt; # default turtle parsing</span>
<span class="sd">        &gt;&gt;&gt; result = g.parse(data=&quot;&lt;http://example.com/a&gt; &lt;http://example.com/a&gt; &lt;http://example.com/a&gt; .&quot;)</span>
<span class="sd">        &gt;&gt;&gt; len(g)</span>
<span class="sd">        3</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">source</span> <span class="o">=</span> <span class="n">create_input_source</span><span class="p">(</span>
            <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
            <span class="n">publicID</span><span class="o">=</span><span class="n">publicID</span><span class="p">,</span>
            <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span>
            <span class="n">file</span><span class="o">=</span><span class="n">file</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">format</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">content_type</span>
        <span class="n">could_not_guess_format</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="nb">hasattr</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">)</span>
                <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">file</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1"># type: ignore[attr-defined]</span>
                <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>  <span class="c1"># type: ignore[attr-defined]</span>
            <span class="p">):</span>
                <span class="nb">format</span> <span class="o">=</span> <span class="n">rdflib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">guess_format</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>  <span class="c1"># type: ignore[attr-defined]</span>
            <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;turtle&quot;</span>
                <span class="n">could_not_guess_format</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="n">Parser</span><span class="p">)()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># TODO FIXME: Parser.parse should have **kwargs argument.</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>  <span class="c1"># type: ignore[call-arg]</span>
        <span class="k">except</span> <span class="ne">SyntaxError</span> <span class="k">as</span> <span class="n">se</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">could_not_guess_format</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ParserError</span><span class="p">(</span>
                    <span class="s2">&quot;Could not guess RDF format for </span><span class="si">%r</span><span class="s2"> from file extension so tried Turtle but failed.&quot;</span>
                    <span class="s2">&quot;You can explicitly specify format using the format argument.&quot;</span>
                    <span class="o">%</span> <span class="n">source</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">se</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">auto_close</span><span class="p">:</span>
                <span class="n">source</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Graph.query"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.query">[docs]</a>    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">query_object</span><span class="p">,</span>
        <span class="n">processor</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">Processor</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;sparql&quot;</span><span class="p">,</span>
        <span class="n">result</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">query</span><span class="o">.</span><span class="n">Result</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;sparql&quot;</span><span class="p">,</span>
        <span class="n">initNs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">initBindings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">use_store_provided</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">query</span><span class="o">.</span><span class="n">Result</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query this graph.</span>

<span class="sd">        A type of &#39;prepared queries&#39; can be realised by providing</span>
<span class="sd">        initial variable bindings with initBindings</span>

<span class="sd">        Initial namespaces are used to resolve prefixes used in the query,</span>
<span class="sd">        if none are given, the namespaces from the graph&#39;s namespace manager</span>
<span class="sd">        are used.</span>

<span class="sd">        :returntype: rdflib.query.Result</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">initBindings</span> <span class="o">=</span> <span class="n">initBindings</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">initNs</span> <span class="o">=</span> <span class="n">initNs</span> <span class="ow">or</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">())</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="s2">&quot;query&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">use_store_provided</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
                    <span class="n">query_object</span><span class="p">,</span>
                    <span class="n">initNs</span><span class="p">,</span>
                    <span class="n">initBindings</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">default_union</span> <span class="ow">and</span> <span class="s2">&quot;__UNION__&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># store has no own implementation</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">Result</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">result</span><span class="p">),</span> <span class="n">query</span><span class="o">.</span><span class="n">Result</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">Processor</span><span class="p">):</span>
            <span class="n">processor</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">Processor</span><span class="p">)(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span><span class="p">(</span><span class="n">processor</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query_object</span><span class="p">,</span> <span class="n">initBindings</span><span class="p">,</span> <span class="n">initNs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span></div>

<div class="viewcode-block" id="Graph.update"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">update_object</span><span class="p">,</span>
        <span class="n">processor</span><span class="o">=</span><span class="s2">&quot;sparql&quot;</span><span class="p">,</span>
        <span class="n">initNs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">initBindings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">use_store_provided</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update this graph with the given update query.&quot;&quot;&quot;</span>
        <span class="n">initBindings</span> <span class="o">=</span> <span class="n">initBindings</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">initNs</span> <span class="o">=</span> <span class="n">initNs</span> <span class="ow">or</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">())</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="s2">&quot;update&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">use_store_provided</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                    <span class="n">update_object</span><span class="p">,</span>
                    <span class="n">initNs</span><span class="p">,</span>
                    <span class="n">initBindings</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">default_union</span> <span class="ow">and</span> <span class="s2">&quot;__UNION__&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># store has no own implementation</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">UpdateProcessor</span><span class="p">):</span>
            <span class="n">processor</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">UpdateProcessor</span><span class="p">)(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">processor</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">update_object</span><span class="p">,</span> <span class="n">initBindings</span><span class="p">,</span> <span class="n">initNs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.n3"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.n3">[docs]</a>    <span class="k">def</span> <span class="nf">n3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an n3 identifier for the Graph&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="o">.</span><span class="n">n3</span><span class="p">()</span></div>

<div class="viewcode-block" id="Graph.__reduce__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.__reduce__">[docs]</a>    <span class="k">def</span> <span class="nf">__reduce__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">Graph</span><span class="p">,</span>
            <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Graph.isomorphic"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.isomorphic">[docs]</a>    <span class="k">def</span> <span class="nf">isomorphic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        does a very basic check if these graphs are the same</span>
<span class="sd">        If no BNodes are involved, this is accurate.</span>

<span class="sd">        See rdflib.compare for a correct implementation of isomorphism checks</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: this is only an approximation.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">BNode</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">BNode</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="ow">in</span> <span class="n">other</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">other</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">BNode</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">BNode</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
        <span class="c1"># TODO: very well could be a false positive at this point yet.</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Graph.connected"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.connected">[docs]</a>    <span class="k">def</span> <span class="nf">connected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the Graph is connected</span>

<span class="sd">        The Graph is considered undirectional.</span>

<span class="sd">        Performs a search on the Graph, starting from a random node. Then</span>
<span class="sd">        iteratively goes depth-first through the triplets where the node is</span>
<span class="sd">        subject and object. Return True if all nodes have been visited and</span>
<span class="sd">        False if it cannot continue and there are still unvisited nodes left.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_nodes</span><span class="p">())</span>
        <span class="n">discovered</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># take a random one, could also always take the first one, doesn&#39;t</span>
        <span class="c1"># really matter.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">all_nodes</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="n">visiting</span> <span class="o">=</span> <span class="p">[</span><span class="n">all_nodes</span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">all_nodes</span><span class="p">))]]</span>
        <span class="k">while</span> <span class="n">visiting</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">visiting</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">discovered</span><span class="p">:</span>
                <span class="n">discovered</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">new_x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">x</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">new_x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">discovered</span> <span class="ow">and</span> <span class="n">new_x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visiting</span><span class="p">:</span>
                    <span class="n">visiting</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_x</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">new_x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subjects</span><span class="p">(</span><span class="nb">object</span><span class="o">=</span><span class="n">x</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">new_x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">discovered</span> <span class="ow">and</span> <span class="n">new_x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visiting</span><span class="p">:</span>
                    <span class="n">visiting</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_x</span><span class="p">)</span>

        <span class="c1"># optimisation by only considering length, since no new objects can</span>
        <span class="c1"># be introduced anywhere.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_nodes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">discovered</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Graph.all_nodes"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.all_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">all_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">())</span>
        <span class="n">res</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subjects</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="Graph.collection"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.collection">[docs]</a>    <span class="k">def</span> <span class="nf">collection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new ``Collection`` instance.</span>

<span class="sd">        Parameters:</span>

<span class="sd">        - ``identifier``: a URIRef or BNode instance.</span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; graph = Graph()</span>
<span class="sd">            &gt;&gt;&gt; uri = URIRef(&quot;http://example.org/resource&quot;)</span>
<span class="sd">            &gt;&gt;&gt; collection = graph.collection(uri)</span>
<span class="sd">            &gt;&gt;&gt; assert isinstance(collection, Collection)</span>
<span class="sd">            &gt;&gt;&gt; assert collection.uri is uri</span>
<span class="sd">            &gt;&gt;&gt; assert collection.graph is graph</span>
<span class="sd">            &gt;&gt;&gt; collection += [ Literal(1), Literal(2) ]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Collection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.resource"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.resource">[docs]</a>    <span class="k">def</span> <span class="nf">resource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new ``Resource`` instance.</span>

<span class="sd">        Parameters:</span>

<span class="sd">        - ``identifier``: a URIRef or BNode instance.</span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; graph = Graph()</span>
<span class="sd">            &gt;&gt;&gt; uri = URIRef(&quot;http://example.org/resource&quot;)</span>
<span class="sd">            &gt;&gt;&gt; resource = graph.resource(uri)</span>
<span class="sd">            &gt;&gt;&gt; assert isinstance(resource, Resource)</span>
<span class="sd">            &gt;&gt;&gt; assert resource.identifier is uri</span>
<span class="sd">            &gt;&gt;&gt; assert resource.graph is graph</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">Node</span><span class="p">):</span>
            <span class="n">identifier</span> <span class="o">=</span> <span class="n">URIRef</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Resource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_process_skolem_tuples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="n">target</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

<div class="viewcode-block" id="Graph.skolemize"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.skolemize">[docs]</a>    <span class="k">def</span> <span class="nf">skolemize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_graph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bnode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">authority</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basepath</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">do_skolemize</span><span class="p">(</span><span class="n">bnode</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
            <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="o">=</span> <span class="n">t</span>
            <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="n">bnode</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">skolemize</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="n">authority</span><span class="p">,</span> <span class="n">basepath</span><span class="o">=</span><span class="n">basepath</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">o</span> <span class="o">==</span> <span class="n">bnode</span><span class="p">:</span>
                <span class="n">o</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">skolemize</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="n">authority</span><span class="p">,</span> <span class="n">basepath</span><span class="o">=</span><span class="n">basepath</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span>

        <span class="k">def</span> <span class="nf">do_skolemize2</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
            <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="o">=</span> <span class="n">t</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">BNode</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">skolemize</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="n">authority</span><span class="p">,</span> <span class="n">basepath</span><span class="o">=</span><span class="n">basepath</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">BNode</span><span class="p">):</span>
                <span class="n">o</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">skolemize</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="n">authority</span><span class="p">,</span> <span class="n">basepath</span><span class="o">=</span><span class="n">basepath</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span>

        <span class="n">retval</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span> <span class="k">if</span> <span class="n">new_graph</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">new_graph</span>

        <span class="k">if</span> <span class="n">bnode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_skolem_tuples</span><span class="p">(</span><span class="n">retval</span><span class="p">,</span> <span class="n">do_skolemize2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bnode</span><span class="p">,</span> <span class="n">BNode</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_skolem_tuples</span><span class="p">(</span><span class="n">retval</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">do_skolemize</span><span class="p">(</span><span class="n">bnode</span><span class="p">,</span> <span class="n">t</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">retval</span></div>

<div class="viewcode-block" id="Graph.de_skolemize"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.de_skolemize">[docs]</a>    <span class="k">def</span> <span class="nf">de_skolemize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_graph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">uriref</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">do_de_skolemize</span><span class="p">(</span><span class="n">uriref</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
            <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="o">=</span> <span class="n">t</span>
            <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="n">uriref</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">de_skolemize</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">o</span> <span class="o">==</span> <span class="n">uriref</span><span class="p">:</span>
                <span class="n">o</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">de_skolemize</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span>

        <span class="k">def</span> <span class="nf">do_de_skolemize2</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
            <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="o">=</span> <span class="n">t</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Genid</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">de_skolemize</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Genid</span><span class="p">):</span>
                <span class="n">o</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">de_skolemize</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span>

        <span class="n">retval</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span> <span class="k">if</span> <span class="n">new_graph</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">new_graph</span>

        <span class="k">if</span> <span class="n">uriref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_skolem_tuples</span><span class="p">(</span><span class="n">retval</span><span class="p">,</span> <span class="n">do_de_skolemize2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">uriref</span><span class="p">,</span> <span class="n">Genid</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_skolem_tuples</span><span class="p">(</span><span class="n">retval</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">do_de_skolemize</span><span class="p">(</span><span class="n">uriref</span><span class="p">,</span> <span class="n">t</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">retval</span></div>

<div class="viewcode-block" id="Graph.cbd"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Graph.cbd">[docs]</a>    <span class="k">def</span> <span class="nf">cbd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieves the Concise Bounded Description of a Resource from a Graph</span>

<span class="sd">        Concise Bounded Description (CBD) is defined in [1] as:</span>

<span class="sd">        Given a particular node (the starting node) in a particular RDF graph (the source graph), a subgraph of that</span>
<span class="sd">        particular graph, taken to comprise a concise bounded description of the resource denoted by the starting node,</span>
<span class="sd">        can be identified as follows:</span>

<span class="sd">            1. Include in the subgraph all statements in the source graph where the subject of the statement is the</span>
<span class="sd">                starting node;</span>

<span class="sd">            2. Recursively, for all statements identified in the subgraph thus far having a blank node object, include</span>
<span class="sd">                in the subgraph all statements in the source graph where the subject of the statement is the blank node</span>
<span class="sd">                in question and which are not already included in the subgraph.</span>

<span class="sd">            3. Recursively, for all statements included in the subgraph thus far, for all reifications of each statement</span>
<span class="sd">                in the source graph, include the concise bounded description beginning from the rdf:Statement node of</span>
<span class="sd">                each reification.</span>

<span class="sd">        This results in a subgraph where the object nodes are either URI references, literals, or blank nodes not</span>
<span class="sd">        serving as the subject of any statement in the graph.</span>

<span class="sd">        [1] https://www.w3.org/Submission/CBD/</span>

<span class="sd">        :param resource: a URIRef object, of the Resource for queried for</span>
<span class="sd">        :return: a Graph, subgraph of self</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">subgraph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">add_to_cbd</span><span class="p">(</span><span class="n">uri</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">uri</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
                <span class="n">subgraph</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">))</span>
                <span class="c1"># recurse &#39;down&#39; through ll Blank Nodes</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">o</span><span class="p">)</span> <span class="o">==</span> <span class="n">BNode</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">in</span> <span class="n">subgraph</span><span class="p">:</span>
                    <span class="n">add_to_cbd</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>

            <span class="c1"># for Rule 3 (reification)</span>
            <span class="c1"># for any rdf:Statement in the graph with the given URI as the object of rdf:subject,</span>
            <span class="c1"># get all triples with that rdf:Statement instance as subject</span>

            <span class="c1"># find any subject s where the predicate is rdf:subject and this uri is the object</span>
            <span class="c1"># (these subjects are of type rdf:Statement, given the domain of rdf:subject)</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">subject</span><span class="p">,</span> <span class="n">uri</span><span class="p">)):</span>
                <span class="c1"># find all triples with s as the subject and add these to the subgraph</span>
                <span class="k">for</span> <span class="n">s2</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">o2</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
                    <span class="n">subgraph</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">s2</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">o2</span><span class="p">))</span>

        <span class="n">add_to_cbd</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">subgraph</span></div></div>


<div class="viewcode-block" id="ConjunctiveGraph"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph">[docs]</a><span class="k">class</span> <span class="nc">ConjunctiveGraph</span><span class="p">(</span><span class="n">Graph</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A ConjunctiveGraph is an (unnamed) aggregation of all the named</span>
<span class="sd">    graphs in a store.</span>

<span class="sd">    It has a ``default`` graph, whose name is associated with the</span>
<span class="sd">    graph throughout its life. :meth:`__init__` can take an identifier</span>
<span class="sd">    to use as the name of this default graph or it will assign a</span>
<span class="sd">    BNode.</span>

<span class="sd">    All methods that add triples work against this default graph.</span>

<span class="sd">    All queries are carried out against the union of all graphs.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ConjunctiveGraph.__init__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">store</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Store</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
        <span class="n">identifier</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">default_graph_base</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ConjunctiveGraph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">store</span><span class="p">,</span> <span class="n">identifier</span><span class="o">=</span><span class="n">identifier</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">context_aware</span><span class="p">,</span> <span class="p">(</span>
            <span class="s2">&quot;ConjunctiveGraph must be backed by&quot;</span> <span class="s2">&quot; a context aware store.&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_aware</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_union</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Conjunctive!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_context</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="n">identifier</span><span class="o">=</span><span class="n">identifier</span> <span class="ow">or</span> <span class="n">BNode</span><span class="p">(),</span> <span class="n">base</span><span class="o">=</span><span class="n">default_graph_base</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.__str__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;[a rdflib:ConjunctiveGraph;rdflib:storage &quot;</span>
            <span class="s2">&quot;[a rdflib:Store;rdfs:label &#39;</span><span class="si">%s</span><span class="s2">&#39;]]&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pattern</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span></div>

    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">_spoc</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">triple_or_quad</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">]</span>
        <span class="p">],</span>
        <span class="n">default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Graph</span><span class="p">]]:</span>
        <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">_spoc</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">triple_or_quad</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Graph</span><span class="p">]]:</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">_spoc</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">triple_or_quad</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">]]</span>
        <span class="p">],</span>
        <span class="n">default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">Node</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Node</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Node</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Graph</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        helper method for having methods that support</span>
<span class="sd">        either triples or quads</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">triple_or_quad</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_context</span> <span class="k">if</span> <span class="n">default</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">triple_or_quad</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_context</span> <span class="k">if</span> <span class="n">default</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="o">=</span> <span class="n">triple_or_quad</span>  <span class="c1"># type: ignore[misc]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">triple_or_quad</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="n">triple_or_quad</span>  <span class="c1"># type: ignore[misc]</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span>

<div class="viewcode-block" id="ConjunctiveGraph.__contains__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple_or_quad</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Support for &#39;triple/quad in graph&#39; syntax&quot;&quot;&quot;</span>
        <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spoc</span><span class="p">(</span><span class="n">triple_or_quad</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">context</span><span class="o">=</span><span class="n">c</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.add"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple_or_quad</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="s2">&quot;ConjunctiveGraph&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore[override]</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a triple or quad to the store.</span>

<span class="sd">        if a triple is given it is added to the default context</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spoc</span><span class="p">(</span><span class="n">triple_or_quad</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">_assertnode</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">context</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">quoted</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Graph</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Graph</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Graph</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Graph</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">c</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Graph</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">c</span>

<div class="viewcode-block" id="ConjunctiveGraph.addN"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.addN">[docs]</a>    <span class="k">def</span> <span class="nf">addN</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quads</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]):</span>
        <span class="sd">&quot;&quot;&quot;Add a sequence of triples with context&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">addN</span><span class="p">(</span>
            <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">quads</span> <span class="k">if</span> <span class="n">_assertnode</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.remove"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple_or_quad</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes a triple or quads</span>

<span class="sd">        if a triple is given it is removed from all contexts</span>

<span class="sd">        a quad is removed from the given context only</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spoc</span><span class="p">(</span><span class="n">triple_or_quad</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">context</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.triples"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.triples">[docs]</a>    <span class="k">def</span> <span class="nf">triples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple_or_quad</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterate over all the triples in the entire conjunctive graph</span>

<span class="sd">        For legacy reasons, this can take the context to query either</span>
<span class="sd">        as a fourth element of the quad, or as the explicit context</span>
<span class="sd">        keyword parameter. The kw param takes precedence.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spoc</span><span class="p">(</span><span class="n">triple_or_quad</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span><span class="p">(</span><span class="n">context</span> <span class="ow">or</span> <span class="n">c</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_union</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">context</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_context</span><span class="p">:</span>
                <span class="n">context</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_context</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span>

            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">cg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.quads"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.quads">[docs]</a>    <span class="k">def</span> <span class="nf">quads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple_or_quad</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Iterate over all the quads in the entire conjunctive graph&quot;&quot;&quot;</span>

        <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spoc</span><span class="p">(</span><span class="n">triple_or_quad</span><span class="p">)</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">cg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">context</span><span class="o">=</span><span class="n">c</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">ctx</span> <span class="ow">in</span> <span class="n">cg</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">ctx</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.triples_choices"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.triples_choices">[docs]</a>    <span class="k">def</span> <span class="nf">triples_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Iterate over all the triples in the entire conjunctive graph&quot;&quot;&quot;</span>
        <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="o">=</span> <span class="n">triple</span>
        <span class="k">if</span> <span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_union</span><span class="p">:</span>
                <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_context</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">o1</span><span class="p">),</span> <span class="n">cg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">triples_choices</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">s1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">o1</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.__len__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Number of triples in the entire conjunctive graph&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="fm">__len__</span><span class="p">()</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.contexts"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.contexts">[docs]</a>    <span class="k">def</span> <span class="nf">contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Iterate over all contexts in the graph</span>

<span class="sd">        If triple is specified, iterate over all contexts the triple is in.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">context</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">contexts</span><span class="p">(</span><span class="n">triple</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">Graph</span><span class="p">):</span>
                <span class="c1"># TODO: One of these should never happen and probably</span>
                <span class="c1"># should raise an exception rather than smoothing over</span>
                <span class="c1"># the weirdness - see #225</span>
                <span class="k">yield</span> <span class="n">context</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">context</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.get_context"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.get_context">[docs]</a>    <span class="k">def</span> <span class="nf">get_context</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">identifier</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">base</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Graph</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return a context graph for the given identifier</span>

<span class="sd">        identifier must be a URIRef or BNode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: FIXME - why is ConjunctiveGraph passed as namespace_manager?</span>
        <span class="k">return</span> <span class="n">Graph</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="n">identifier</span><span class="o">=</span><span class="n">identifier</span><span class="p">,</span> <span class="n">namespace_manager</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="n">base</span>  <span class="c1"># type: ignore[arg-type]</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.remove_context"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.remove_context">[docs]</a>    <span class="k">def</span> <span class="nf">remove_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes the given context from the graph&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">context</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.context_id"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.context_id">[docs]</a>    <span class="k">def</span> <span class="nf">context_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">context_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;URI#context&quot;&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">context_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">context_id</span> <span class="o">=</span> <span class="s2">&quot;#context&quot;</span>
        <span class="k">return</span> <span class="n">URIRef</span><span class="p">(</span><span class="n">context_id</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="n">uri</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.parse"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="n">TextIO</span><span class="p">,</span> <span class="n">InputSource</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">PurePath</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">publicID</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">BinaryIO</span><span class="p">,</span> <span class="n">TextIO</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">args</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse source adding the resulting triples to its own context</span>
<span class="sd">        (sub graph of this graph).</span>

<span class="sd">        See :meth:`rdflib.graph.Graph.parse` for documentation on arguments.</span>

<span class="sd">        :Returns:</span>

<span class="sd">        The graph into which the source was parsed. In the case of n3</span>
<span class="sd">        it returns the root context.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">source</span> <span class="o">=</span> <span class="n">create_input_source</span><span class="p">(</span>
            <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
            <span class="n">publicID</span><span class="o">=</span><span class="n">publicID</span><span class="p">,</span>
            <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span>
            <span class="n">file</span><span class="o">=</span><span class="n">file</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">g_id</span> <span class="o">=</span> <span class="n">publicID</span> <span class="ow">and</span> <span class="n">publicID</span> <span class="ow">or</span> <span class="n">source</span><span class="o">.</span><span class="n">getPublicId</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">g_id</span><span class="p">,</span> <span class="n">Node</span><span class="p">):</span>
            <span class="n">g_id</span> <span class="o">=</span> <span class="n">URIRef</span><span class="p">(</span><span class="n">g_id</span><span class="p">)</span>

        <span class="n">context</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">(</span><span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="n">identifier</span><span class="o">=</span><span class="n">g_id</span><span class="p">)</span>
        <span class="n">context</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>  <span class="c1"># hmm ?</span>
        <span class="n">context</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">publicID</span><span class="o">=</span><span class="n">publicID</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="c1"># TODO: FIXME: This should not return context, but self.</span>
        <span class="k">return</span> <span class="n">context</span></div>

<div class="viewcode-block" id="ConjunctiveGraph.__reduce__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ConjunctiveGraph.__reduce__">[docs]</a>    <span class="k">def</span> <span class="nf">__reduce__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ConjunctiveGraph</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span></div></div>


<span class="n">DATASET_DEFAULT_GRAPH_ID</span> <span class="o">=</span> <span class="n">URIRef</span><span class="p">(</span><span class="s2">&quot;urn:x-rdflib:default&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="Dataset"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset">[docs]</a><span class="k">class</span> <span class="nc">Dataset</span><span class="p">(</span><span class="n">ConjunctiveGraph</span><span class="p">):</span>
    <span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    RDF 1.1 Dataset. Small extension to the Conjunctive Graph:</span>
<span class="s2">    - the primary term is graphs in the datasets and not contexts with quads,</span>
<span class="s2">    so there is a separate method to set/retrieve a graph in a dataset and</span>
<span class="s2">    operate with graphs</span>
<span class="s2">    - graphs cannot be identified with blank nodes</span>
<span class="s2">    - added a method to directly add a single quad</span>

<span class="s2">    Examples of usage:</span>

<span class="s2">    &gt;&gt;&gt; # Create a new Dataset</span>
<span class="s2">    &gt;&gt;&gt; ds = Dataset()</span>
<span class="s2">    &gt;&gt;&gt; # simple triples goes to default graph</span>
<span class="s2">    &gt;&gt;&gt; ds.add((URIRef(&quot;http://example.org/a&quot;),</span>
<span class="s2">    ...    URIRef(&quot;http://www.example.org/b&quot;),</span>
<span class="s2">    ...    Literal(&quot;foo&quot;)))  # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Dataset&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt;</span>
<span class="s2">    &gt;&gt;&gt; # Create a graph in the dataset, if the graph name has already been</span>
<span class="s2">    &gt;&gt;&gt; # used, the corresponding graph will be returned</span>
<span class="s2">    &gt;&gt;&gt; # (ie, the Dataset keeps track of the constituent graphs)</span>
<span class="s2">    &gt;&gt;&gt; g = ds.graph(URIRef(&quot;http://www.example.com/gr&quot;))</span>
<span class="s2">    &gt;&gt;&gt;</span>
<span class="s2">    &gt;&gt;&gt; # add triples to the new graph as usual</span>
<span class="s2">    &gt;&gt;&gt; g.add(</span>
<span class="s2">    ...     (URIRef(&quot;http://example.org/x&quot;),</span>
<span class="s2">    ...     URIRef(&quot;http://example.org/y&quot;),</span>
<span class="s2">    ...     Literal(&quot;bar&quot;)) ) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Graph&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt; # alternatively: add a quad to the dataset -&gt; goes to the graph</span>
<span class="s2">    &gt;&gt;&gt; ds.add(</span>
<span class="s2">    ...     (URIRef(&quot;http://example.org/x&quot;),</span>
<span class="s2">    ...     URIRef(&quot;http://example.org/z&quot;),</span>
<span class="s2">    ...     Literal(&quot;foo-bar&quot;),g) ) # doctest: +ELLIPSIS</span>
<span class="s2">    &lt;Graph identifier=... (&lt;class &#39;rdflib.graph.Dataset&#39;&gt;)&gt;</span>
<span class="s2">    &gt;&gt;&gt;</span>
<span class="s2">    &gt;&gt;&gt; # querying triples return them all regardless of the graph</span>
<span class="s2">    &gt;&gt;&gt; for t in ds.triples((None,None,None)):  # doctest: +SKIP</span>
<span class="s2">    ...     print(t)  # doctest: +NORMALIZE_WHITESPACE</span>
<span class="s2">    (rdflib.term.URIRef(&quot;http://example.org/a&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://www.example.org/b&quot;),</span>
<span class="s2">     rdflib.term.Literal(&quot;foo&quot;))</span>
<span class="s2">    (rdflib.term.URIRef(&quot;http://example.org/x&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://example.org/z&quot;),</span>
<span class="s2">     rdflib.term.Literal(&quot;foo-bar&quot;))</span>
<span class="s2">    (rdflib.term.URIRef(&quot;http://example.org/x&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://example.org/y&quot;),</span>
<span class="s2">     rdflib.term.Literal(&quot;bar&quot;))</span>
<span class="s2">    &gt;&gt;&gt;</span>
<span class="s2">    &gt;&gt;&gt; # querying quads() return quads; the fourth argument can be unrestricted</span>
<span class="s2">    &gt;&gt;&gt; # (None) or restricted to a graph</span>
<span class="s2">    &gt;&gt;&gt; for q in ds.quads((None, None, None, None)):  # doctest: +SKIP</span>
<span class="s2">    ...     print(q)  # doctest: +NORMALIZE_WHITESPACE</span>
<span class="s2">    (rdflib.term.URIRef(&quot;http://example.org/a&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://www.example.org/b&quot;),</span>
<span class="s2">     rdflib.term.Literal(&quot;foo&quot;),</span>
<span class="s2">     None)</span>
<span class="s2">    (rdflib.term.URIRef(&quot;http://example.org/x&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://example.org/y&quot;),</span>
<span class="s2">     rdflib.term.Literal(&quot;bar&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://www.example.com/gr&quot;))</span>
<span class="s2">    (rdflib.term.URIRef(&quot;http://example.org/x&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://example.org/z&quot;),</span>
<span class="s2">     rdflib.term.Literal(&quot;foo-bar&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://www.example.com/gr&quot;))</span>
<span class="s2">    &gt;&gt;&gt;</span>
<span class="s2">    &gt;&gt;&gt; # unrestricted looping is equivalent to iterating over the entire Dataset</span>
<span class="s2">    &gt;&gt;&gt; for q in ds:  # doctest: +SKIP</span>
<span class="s2">    ...     print(q)  # doctest: +NORMALIZE_WHITESPACE</span>
<span class="s2">    (rdflib.term.URIRef(&quot;http://example.org/a&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://www.example.org/b&quot;),</span>
<span class="s2">     rdflib.term.Literal(&quot;foo&quot;),</span>
<span class="s2">     None)</span>
<span class="s2">    (rdflib.term.URIRef(&quot;http://example.org/x&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://example.org/y&quot;),</span>
<span class="s2">     rdflib.term.Literal(&quot;bar&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://www.example.com/gr&quot;))</span>
<span class="s2">    (rdflib.term.URIRef(&quot;http://example.org/x&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://example.org/z&quot;),</span>
<span class="s2">     rdflib.term.Literal(&quot;foo-bar&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://www.example.com/gr&quot;))</span>
<span class="s2">    &gt;&gt;&gt;</span>
<span class="s2">    &gt;&gt;&gt; # resticting iteration to a graph:</span>
<span class="s2">    &gt;&gt;&gt; for q in ds.quads((None, None, None, g)):  # doctest: +SKIP</span>
<span class="s2">    ...     print(q)  # doctest: +NORMALIZE_WHITESPACE</span>
<span class="s2">    (rdflib.term.URIRef(&quot;http://example.org/x&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://example.org/y&quot;),</span>
<span class="s2">     rdflib.term.Literal(&quot;bar&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://www.example.com/gr&quot;))</span>
<span class="s2">    (rdflib.term.URIRef(&quot;http://example.org/x&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://example.org/z&quot;),</span>
<span class="s2">     rdflib.term.Literal(&quot;foo-bar&quot;),</span>
<span class="s2">     rdflib.term.URIRef(&quot;http://www.example.com/gr&quot;))</span>
<span class="s2">    &gt;&gt;&gt; # Note that in the call above -</span>
<span class="s2">    &gt;&gt;&gt; # ds.quads((None,None,None,&quot;http://www.example.com/gr&quot;))</span>
<span class="s2">    &gt;&gt;&gt; # would have been accepted, too</span>
<span class="s2">    &gt;&gt;&gt;</span>
<span class="s2">    &gt;&gt;&gt; # graph names in the dataset can be queried:</span>
<span class="s2">    &gt;&gt;&gt; for c in ds.graphs():  # doctest: +SKIP</span>
<span class="s2">    ...     print(c)  # doctest:</span>
<span class="s2">    DEFAULT</span>
<span class="s2">    http://www.example.com/gr</span>
<span class="s2">    &gt;&gt;&gt; # A graph can be created without specifying a name; a skolemized genid</span>
<span class="s2">    &gt;&gt;&gt; # is created on the fly</span>
<span class="s2">    &gt;&gt;&gt; h = ds.graph()</span>
<span class="s2">    &gt;&gt;&gt; for c in ds.graphs():  # doctest: +SKIP</span>
<span class="s2">    ...     print(c)  # doctest: +NORMALIZE_WHITESPACE +ELLIPSIS</span>
<span class="s2">    DEFAULT</span>
<span class="s2">    http://rdlib.net/.well-known/genid/rdflib/N...</span>
<span class="s2">    http://www.example.com/gr</span>
<span class="s2">    &gt;&gt;&gt; # Note that the Dataset.graphs() call returns names of empty graphs,</span>
<span class="s2">    &gt;&gt;&gt; # too. This can be restricted:</span>
<span class="s2">    &gt;&gt;&gt; for c in ds.graphs(empty=False):  # doctest: +SKIP</span>
<span class="s2">    ...     print(c)  # doctest: +NORMALIZE_WHITESPACE</span>
<span class="s2">    DEFAULT</span>
<span class="s2">    http://www.example.com/gr</span>
<span class="s2">    &gt;&gt;&gt;</span>
<span class="s2">    &gt;&gt;&gt; # a graph can also be removed from a dataset via ds.remove_graph(g)</span>

<span class="s2">    .. versionadded:: 4.0</span>
<span class="s2">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Dataset.__init__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="n">default_union</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">default_graph_base</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Dataset</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">,</span> <span class="n">identifier</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">graph_aware</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;DataSet must be backed by a graph-aware store!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_context</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">identifier</span><span class="o">=</span><span class="n">DATASET_DEFAULT_GRAPH_ID</span><span class="p">,</span>
            <span class="n">base</span><span class="o">=</span><span class="n">default_graph_base</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default_union</span> <span class="o">=</span> <span class="n">default_union</span></div>

<div class="viewcode-block" id="Dataset.__str__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;[a rdflib:Dataset;rdflib:storage &quot;</span> <span class="s2">&quot;[a rdflib:Store;rdfs:label &#39;</span><span class="si">%s</span><span class="s2">&#39;]]&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pattern</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span></div>

<div class="viewcode-block" id="Dataset.__reduce__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.__reduce__">[docs]</a>    <span class="k">def</span> <span class="nf">__reduce__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_union</span><span class="p">))</span></div>

<div class="viewcode-block" id="Dataset.__getstate__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.__getstate__">[docs]</a>    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_context</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_union</span></div>

<div class="viewcode-block" id="Dataset.__setstate__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.__setstate__">[docs]</a>    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_context</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_union</span> <span class="o">=</span> <span class="n">state</span></div>

<div class="viewcode-block" id="Dataset.graph"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.graph">[docs]</a>    <span class="k">def</span> <span class="nf">graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">rdflib.term</span> <span class="kn">import</span> <span class="n">rdflib_skolem_genid</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
                <span class="s2">&quot;genid&quot;</span><span class="p">,</span> <span class="s2">&quot;http://rdflib.net&quot;</span> <span class="o">+</span> <span class="n">rdflib_skolem_genid</span><span class="p">,</span> <span class="n">override</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
            <span class="n">identifier</span> <span class="o">=</span> <span class="n">BNode</span><span class="p">()</span><span class="o">.</span><span class="n">skolemize</span><span class="p">()</span>

        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_graph</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">base</span> <span class="o">=</span> <span class="n">base</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">add_graph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">g</span></div>

<div class="viewcode-block" id="Dataset.parse"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">publicID</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">args</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">ConjunctiveGraph</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">publicID</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">c</span></div>

<div class="viewcode-block" id="Dataset.add_graph"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.add_graph">[docs]</a>    <span class="k">def</span> <span class="nf">add_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">g</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;alias of graph for consistency&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.remove_graph"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.remove_graph">[docs]</a>    <span class="k">def</span> <span class="nf">remove_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">g</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">Graph</span><span class="p">):</span>
            <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">remove_graph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">g</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">g</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_context</span><span class="p">:</span>
            <span class="c1"># default graph cannot be removed</span>
            <span class="c1"># only triples deleted, so add it back in</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">add_graph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_context</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Dataset.contexts"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.contexts">[docs]</a>    <span class="k">def</span> <span class="nf">contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">default</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">super</span><span class="p">(</span><span class="n">Dataset</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">contexts</span><span class="p">(</span><span class="n">triple</span><span class="p">):</span>
            <span class="n">default</span> <span class="o">|=</span> <span class="n">c</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">DATASET_DEFAULT_GRAPH_ID</span>
            <span class="k">yield</span> <span class="n">c</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">default</span><span class="p">:</span>
            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">(</span><span class="n">DATASET_DEFAULT_GRAPH_ID</span><span class="p">)</span></div>

    <span class="n">graphs</span> <span class="o">=</span> <span class="n">contexts</span>

<div class="viewcode-block" id="Dataset.quads"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.quads">[docs]</a>    <span class="k">def</span> <span class="nf">quads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quad</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">super</span><span class="p">(</span><span class="n">Dataset</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">quads</span><span class="p">(</span><span class="n">quad</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_context</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">identifier</span></div>

<div class="viewcode-block" id="Dataset.__iter__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Dataset.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">DatasetQuad</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Iterates over all quads in the store&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">quads</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="QuotedGraph"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.QuotedGraph">[docs]</a><span class="k">class</span> <span class="nc">QuotedGraph</span><span class="p">(</span><span class="n">Graph</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Quoted Graphs are intended to implement Notation 3 formulae. They are</span>
<span class="sd">    associated with a required identifier that the N3 parser *must* provide</span>
<span class="sd">    in order to maintain consistent formulae identification for scenarios</span>
<span class="sd">    such as implication and other such processing.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="QuotedGraph.__init__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.QuotedGraph.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">store</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">QuotedGraph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">store</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="QuotedGraph.add"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.QuotedGraph.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Add a triple with self as context&quot;&quot;&quot;</span>
        <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="o">=</span> <span class="n">triple</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Node</span><span class="p">),</span> <span class="s2">&quot;Subject </span><span class="si">%s</span><span class="s2"> must be an rdflib term&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">s</span><span class="p">,)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Node</span><span class="p">),</span> <span class="s2">&quot;Predicate </span><span class="si">%s</span><span class="s2"> must be an rdflib term&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p</span><span class="p">,)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Node</span><span class="p">),</span> <span class="s2">&quot;Object </span><span class="si">%s</span><span class="s2"> must be an rdflib term&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">o</span><span class="p">,)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">),</span> <span class="bp">self</span><span class="p">,</span> <span class="n">quoted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="QuotedGraph.addN"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.QuotedGraph.addN">[docs]</a>    <span class="k">def</span> <span class="nf">addN</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quads</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuotedGraph&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore[override]</span>
        <span class="sd">&quot;&quot;&quot;Add a sequence of triple with context&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">addN</span><span class="p">(</span>
            <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">quads</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">QuotedGraph</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">identifier</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span>
            <span class="ow">and</span> <span class="n">_assertnode</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="QuotedGraph.n3"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.QuotedGraph.n3">[docs]</a>    <span class="k">def</span> <span class="nf">n3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an n3 identifier for the Graph&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;{</span><span class="si">%s</span><span class="s2">}&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="o">.</span><span class="n">n3</span><span class="p">()</span></div>

<div class="viewcode-block" id="QuotedGraph.__str__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.QuotedGraph.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="o">.</span><span class="n">n3</span><span class="p">()</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;{this rdflib.identifier </span><span class="si">%s</span><span class="s2">;rdflib:storage &quot;</span>
            <span class="s2">&quot;[a rdflib:Store;rdfs:label &#39;</span><span class="si">%s</span><span class="s2">&#39;]}&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pattern</span> <span class="o">%</span> <span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span></div>

<div class="viewcode-block" id="QuotedGraph.__reduce__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.QuotedGraph.__reduce__">[docs]</a>    <span class="k">def</span> <span class="nf">__reduce__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">QuotedGraph</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span></div></div>


<span class="c1"># Make sure QuotedGraph is ordered correctly</span>
<span class="c1"># wrt to other Terms.</span>
<span class="c1"># this must be done here, as the QuotedGraph cannot be</span>
<span class="c1"># circularily imported in term.py</span>
<span class="n">rdflib</span><span class="o">.</span><span class="n">term</span><span class="o">.</span><span class="n">_ORDERING</span><span class="p">[</span><span class="n">QuotedGraph</span><span class="p">]</span> <span class="o">=</span> <span class="mi">11</span>


<div class="viewcode-block" id="Seq"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Seq">[docs]</a><span class="k">class</span> <span class="nc">Seq</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Wrapper around an RDF Seq resource</span>

<span class="sd">    It implements a container type in Python with the order of the items</span>
<span class="sd">    returned corresponding to the Seq content. It is based on the natural</span>
<span class="sd">    ordering of the predicate names _1, _2, _3, etc, which is the</span>
<span class="sd">    &#39;implementation&#39; of a sequence in RDF terms.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Seq.__init__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Seq.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">,</span> <span class="n">subject</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parameters:</span>

<span class="sd">        - graph:</span>
<span class="sd">            the graph containing the Seq</span>

<span class="sd">        - subject:</span>
<span class="sd">            the subject of a Seq. Note that the init does not</span>
<span class="sd">            check whether this is a Seq, this is done in whoever</span>
<span class="sd">            creates this instance!</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">LI_INDEX</span> <span class="o">=</span> <span class="n">URIRef</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">RDF</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">predicate_objects</span><span class="p">(</span><span class="n">subject</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">LI_INDEX</span><span class="p">):</span>  <span class="c1"># != RDF.Seq: #</span>
                <span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">LI_INDEX</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
                <span class="n">_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">o</span><span class="p">))</span>

        <span class="c1"># here is the trick: the predicates are _1, _2, _3, etc. Ie,</span>
        <span class="c1"># by sorting the keys (by integer) we have what we want!</span>
        <span class="n">_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span></div>

<div class="viewcode-block" id="Seq.toPython"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Seq.toPython">[docs]</a>    <span class="k">def</span> <span class="nf">toPython</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Seq.__iter__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Seq.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generator over the items in the Seq&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">item</span></div>

<div class="viewcode-block" id="Seq.__len__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Seq.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Length of the Seq&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Seq.__getitem__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.Seq.__getitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Item given by index from the Seq&quot;&quot;&quot;</span>
        <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">item</span></div></div>


<div class="viewcode-block" id="ModificationException"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ModificationException">[docs]</a><span class="k">class</span> <span class="nc">ModificationException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<div class="viewcode-block" id="ModificationException.__init__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ModificationException.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="ModificationException.__str__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ModificationException.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="s2">&quot;Modifications and transactional operations not allowed on &quot;</span>
            <span class="s2">&quot;ReadOnlyGraphAggregate instances&quot;</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="UnSupportedAggregateOperation"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.UnSupportedAggregateOperation">[docs]</a><span class="k">class</span> <span class="nc">UnSupportedAggregateOperation</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<div class="viewcode-block" id="UnSupportedAggregateOperation.__init__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.UnSupportedAggregateOperation.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="UnSupportedAggregateOperation.__str__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.UnSupportedAggregateOperation.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;This operation is not supported by ReadOnlyGraphAggregate &quot;</span> <span class="s2">&quot;instances&quot;</span></div></div>


<div class="viewcode-block" id="ReadOnlyGraphAggregate"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate">[docs]</a><span class="k">class</span> <span class="nc">ReadOnlyGraphAggregate</span><span class="p">(</span><span class="n">ConjunctiveGraph</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility class for treating a set of graphs as a single graph</span>

<span class="sd">    Only read operations are supported (hence the name). Essentially a</span>
<span class="sd">    ConjunctiveGraph over an explicit subset of the entire store.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.__init__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graphs</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">store</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">ReadOnlyGraphAggregate</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
            <span class="n">Graph</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">store</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__namespace_manager</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">assert</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">graphs</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">graphs</span>
            <span class="ow">and</span> <span class="p">[</span><span class="n">g</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">graphs</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">Graph</span><span class="p">)]</span>
        <span class="p">),</span> <span class="s2">&quot;graphs argument must be a list of Graphs!!&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span> <span class="o">=</span> <span class="n">graphs</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.__repr__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;ReadOnlyGraphAggregate: </span><span class="si">%s</span><span class="s2"> graphs&gt;&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.destroy"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.destroy">[docs]</a>    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ModificationException</span><span class="p">()</span></div>

    <span class="c1"># Transactional interfaces (optional)</span>
<div class="viewcode-block" id="ReadOnlyGraphAggregate.commit"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.commit">[docs]</a>    <span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ModificationException</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.rollback"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.rollback">[docs]</a>    <span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ModificationException</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.open"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.open">[docs]</a>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">create</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># TODO: is there a use case for this method?</span>
        <span class="k">for</span> <span class="n">graph</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">create</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.close"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">graph</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.add"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ModificationException</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.addN"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.addN">[docs]</a>    <span class="k">def</span> <span class="nf">addN</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quads</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ModificationException</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.remove"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ModificationException</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.triples"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.triples">[docs]</a>    <span class="k">def</span> <span class="nf">triples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">):</span>
        <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="o">=</span> <span class="n">triple</span>
        <span class="k">for</span> <span class="n">graph</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">o1</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)):</span>
                    <span class="k">yield</span> <span class="n">s1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">o1</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.__contains__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple_or_quad</span><span class="p">):</span>
        <span class="n">context</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">triple_or_quad</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">context</span> <span class="o">=</span> <span class="n">triple_or_quad</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">graph</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">graph</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">context</span><span class="o">.</span><span class="n">identifier</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">triple_or_quad</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="ow">in</span> <span class="n">graph</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.quads"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.quads">[docs]</a>    <span class="k">def</span> <span class="nf">quads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple_or_quad</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Iterate over all the quads in the entire aggregate graph&quot;&quot;&quot;</span>
        <span class="n">c</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">triple_or_quad</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">triple_or_quad</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="o">=</span> <span class="n">triple_or_quad</span>

        <span class="k">if</span> <span class="n">c</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">graph</span> <span class="ow">in</span> <span class="p">[</span><span class="n">g</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span> <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="n">c</span><span class="p">]:</span>
                <span class="k">for</span> <span class="n">s1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">o1</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)):</span>
                    <span class="k">yield</span> <span class="n">s1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">o1</span><span class="p">,</span> <span class="n">graph</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">graph</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">o1</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)):</span>
                    <span class="k">yield</span> <span class="n">s1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">o1</span><span class="p">,</span> <span class="n">graph</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.__len__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.__hash__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.__hash__">[docs]</a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">UnSupportedAggregateOperation</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.__cmp__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.__cmp__">[docs]</a>    <span class="k">def</span> <span class="nf">__cmp__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Graph</span><span class="p">):</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ReadOnlyGraphAggregate</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graphs</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">graphs</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graphs</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">graphs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.__iadd__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.__iadd__">[docs]</a>    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ModificationException</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.__isub__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.__isub__">[docs]</a>    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ModificationException</span><span class="p">()</span></div>

    <span class="c1"># Conv. methods</span>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.triples_choices"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.triples_choices">[docs]</a>    <span class="k">def</span> <span class="nf">triples_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">object_</span> <span class="o">=</span> <span class="n">triple</span>
        <span class="k">for</span> <span class="n">graph</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">:</span>
            <span class="n">choices</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">triples_choices</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">object_</span><span class="p">))</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.qname"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.qname">[docs]</a>    <span class="k">def</span> <span class="nf">qname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;namespace_manager&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace_manager</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace_manager</span><span class="o">.</span><span class="n">qname</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">UnSupportedAggregateOperation</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.compute_qname"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.compute_qname">[docs]</a>    <span class="k">def</span> <span class="nf">compute_qname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">generate</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;namespace_manager&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace_manager</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace_manager</span><span class="o">.</span><span class="n">compute_qname</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">generate</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">UnSupportedAggregateOperation</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.bind"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.bind">[docs]</a>    <span class="k">def</span> <span class="nf">bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">override</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">UnSupportedAggregateOperation</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.namespaces"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.namespaces">[docs]</a>    <span class="k">def</span> <span class="nf">namespaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;namespace_manager&quot;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace_manager</span><span class="o">.</span><span class="n">namespaces</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">graph</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">namespaces</span><span class="p">():</span>
                    <span class="k">yield</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.absolutize"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.absolutize">[docs]</a>    <span class="k">def</span> <span class="nf">absolutize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">defrag</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">UnSupportedAggregateOperation</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.parse"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">publicID</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ModificationException</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.n3"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.n3">[docs]</a>    <span class="k">def</span> <span class="nf">n3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">UnSupportedAggregateOperation</span><span class="p">()</span></div>

<div class="viewcode-block" id="ReadOnlyGraphAggregate.__reduce__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.ReadOnlyGraphAggregate.__reduce__">[docs]</a>    <span class="k">def</span> <span class="nf">__reduce__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">UnSupportedAggregateOperation</span><span class="p">()</span></div></div>


<span class="k">def</span> <span class="nf">_assertnode</span><span class="p">(</span><span class="o">*</span><span class="n">terms</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">terms</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">Node</span><span class="p">),</span> <span class="s2">&quot;Term </span><span class="si">%s</span><span class="s2"> must be an rdflib term&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t</span><span class="p">,)</span>
    <span class="k">return</span> <span class="kc">True</span>


<div class="viewcode-block" id="BatchAddGraph"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.BatchAddGraph">[docs]</a><span class="k">class</span> <span class="nc">BatchAddGraph</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wrapper around graph that turns batches of calls to Graph&#39;s add</span>
<span class="sd">    (and optionally, addN) into calls to batched calls to addN`.</span>

<span class="sd">    :Parameters:</span>

<span class="sd">      - graph: The graph to wrap</span>
<span class="sd">      - batch_size: The maximum number of triples to buffer before passing to</span>
<span class="sd">        Graph&#39;s addN</span>
<span class="sd">      - batch_addn: If True, then even calls to `addN` will be batched according to</span>
<span class="sd">        batch_size</span>

<span class="sd">    graph: The wrapped graph</span>
<span class="sd">    count: The number of triples buffered since initialization or the last call to reset</span>
<span class="sd">    batch: The current buffer of triples</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="BatchAddGraph.__init__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.BatchAddGraph.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="n">Graph</span><span class="p">,</span> <span class="n">batch_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">batch_addn</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">batch_size</span> <span class="ow">or</span> <span class="n">batch_size</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;batch_size must be a positive number&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__graph_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="n">graph</span><span class="p">,)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__batch_size</span> <span class="o">=</span> <span class="n">batch_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__batch_addn</span> <span class="o">=</span> <span class="n">batch_addn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>

<div class="viewcode-block" id="BatchAddGraph.reset"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.BatchAddGraph.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Manually clear the buffered triples and reset the count to zero</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">batch</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="BatchAddGraph.add"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.BatchAddGraph.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">triple_or_quad</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BatchAddGraph&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a triple to the buffer</span>

<span class="sd">        :param triple: The triple to add</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">batch</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__batch_size</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">addN</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">batch</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">batch</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">triple_or_quad</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">triple_or_quad</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__graph_tuple</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">triple_or_quad</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="BatchAddGraph.addN"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.BatchAddGraph.addN">[docs]</a>    <span class="k">def</span> <span class="nf">addN</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quads</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__batch_addn</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">quads</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">addN</span><span class="p">(</span><span class="n">quads</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="BatchAddGraph.__enter__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.BatchAddGraph.__enter__">[docs]</a>    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="BatchAddGraph.__exit__"><a class="viewcode-back" href="../../apidocs/rdflib.html#rdflib.graph.BatchAddGraph.__exit__">[docs]</a>    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">exc</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">exc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">addN</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">batch</span><span class="p">)</span></div></div>


<span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
    <span class="kn">import</span> <span class="nn">doctest</span>

    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">test</span><span class="p">()</span>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/RDFlib.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">rdflib 6.2.0-alpha documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">rdflib.graph</a></li> 
      </ul>
    </div>
<div class="footer">
    &copy; Copyright 2009 - 2021, RDFLib Team.
  Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 4.3.2.
  <br />Theme based on <a href="http://readthedocs.org/">Read The Docs</a>

</div>





  </body>
</html>